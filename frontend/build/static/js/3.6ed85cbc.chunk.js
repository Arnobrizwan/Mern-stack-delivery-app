(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[3],{88:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(5),n=r.n(a),c=r(9);function i(e){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(n.a.mark((function e(t){var r,a,c,i,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Headers).append("Accept","application/json"),a={method:"GET",headers:r},e.prev=3,e.next=6,fetch("/api/categories",a);case 6:return c=e.sent,e.next=9,c.json();case 9:i=e.sent,o=i.data,t(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}},93:function(e,t,r){"use strict";r.r(t),r.d(t,"LinksWrapper",(function(){return l})),r.d(t,"default",(function(){return d}));var a,n=r(3),c=r(2),i=r(85),o=r(94),s=r(17),u=r(0),l=c.b.div(a||(a=Object(n.a)(["\ndisplay:flex;\nmargin:5px 0;\nmargin-left:15px;\nwidth:max-content;\n"])));function d(){return Object(u.jsxs)(o.StyledSection,{children:[Object(u.jsx)(l,{children:Object(u.jsx)(s.a,{to:"/dashboard/myProducts",children:"Regresar "})}),Object(u.jsx)(i.p,{})]})}},94:function(e,t,r){"use strict";r.r(t),r.d(t,"StyledSection",(function(){return w}));var a=r(3),n=r(2),c=r(11),i=r(5),o=r.n(i),s=r(9),u=r(88);function l(){return(l=Object(s.a)(o.a.mark((function e(t){var r,a,n,c,i,s,l,d,p,b,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.token,a=t.formData,n=t.id,t.nameValue,t.categoryValue,t.sizeValue,t.descriptionValue,t.priceValue,c=t.setIsSuccessfullySend,i=t.setFormIsLoading,s=t.history,l=t.setAllCategories,(d=new Headers).append("Accept","application/json"),d.append("Authorization","Bearer ".concat(r)),p={method:"PUT",headers:d,body:a},b="/api/products/".concat(n),e.prev=6,e.next=9,fetch(b,p);case 9:if(j=e.sent,i(!1),200!==j.status){e.next=16;break}return e.next=14,Object(u.a)(l);case 14:c(!0),setTimeout((function(){return c(!1),s.push("/dashboard/myProducts")}),2e3);case 16:if(403!==j.status){e.next=18;break}return e.abrupt("return",alert("Se require rol de Administrador"));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[6,20]])})))).apply(this,arguments)}var d=function(e){return l.apply(this,arguments)},p=r(73),b=r(7),j=r(1),m=r(6);var f,g=r(75),h=r(39),v=r(81),O=r(85),x=r.p+"static/media/pencil-edit-form.1d2432a8.svg",y=r(0),V=Object(n.b)(v.e)(f||(f=Object(a.a)([" \ntransform:scale(0.75);\n"])));function S(){var e=function(){var e=Object(b.a)(),t=e.token,r=e.productToEdit,a=e.setIsSuccessfullySend,n=e.setAllCategories,i=e.categories,o=Object(p.a)({mode:"onBlur"}),s=o.register,u=o.handleSubmit,l=o.formState.errors,f=Object(m.g)(),g=Object(j.useState)(!1),h=Object(c.a)(g,2),v=h[0],O=h[1],x=Object(j.useState)(r.name),y=Object(c.a)(x,2),V=y[0],S=y[1],C=Object(j.useState)(r.category),z=Object(c.a)(C,2),k=z[0],w=z[1],q=Object(j.useState)(r.price),E=Object(c.a)(q,2),P=E[0],A=E[1],I=Object(j.useState)(r.size),D=Object(c.a)(I,2),L=D[0],T=D[1],N=Object(j.useState)(r.description),F=Object(c.a)(N,2),B=F[0],H=F[1],J=r._id;return Object(j.useEffect)((function(){S(r.name),w(r.category),A(r.price),T(r.size),H(r.description)}),[r]),{register:s,handleSubmit:u,errors:l,onSubmit:function(e,r){O(!0),r.preventDefault();var c=new FormData,i=!!r.target.state.checked,o=parseInt(P);c.append("img",r.target.img.files[0]),c.append("name",V),c.append("category",k),c.append("size",L),c.append("description",B),c.append("price",o),c.append("active",i),d({token:t,formData:c,id:J,nameValue:V,categoryValue:k,sizeValue:L,descriptionValue:B,priceValue:P,setIsSuccessfullySend:a,setFormIsLoading:O,setAllCategories:n,history:f})},setNameValue:S,setCategoryValue:w,setPriceValue:A,setSizeValue:T,setDescriptionValue:H,categories:i,nameValue:V,categoryValue:k,priceValue:P,sizeValue:L,descriptionValue:B,formIsLoading:v,productToEdit:r}}(),t=e.categories,r=e.register,a=e.handleSubmit,n=e.errors,i=e.onSubmit,o=e.productToEdit,s=e.setNameValue,u=e.setCategoryValue,l=e.setPriceValue,f=e.setSizeValue,v=e.setDescriptionValue,S=e.nameValue,C=e.categoryValue,z=e.priceValue,k=e.sizeValue,w=e.descriptionValue,q=e.formIsLoading;return Object(y.jsx)(O.l,{children:Object(y.jsxs)(O.o,{children:[Object(y.jsx)(V,{src:x,alt:"new-product"}),Object(y.jsxs)(O.n,{enctype:"multipart/form-data",onSubmit:a(i),children:[Object(y.jsxs)(O.f,{children:["Editar ",null===o||void 0===o?void 0:o.name]}),n.productName&&Object(y.jsx)(g.a,{role:"alert",children:"*El campo es obligario"}),Object(y.jsx)(O.m,{style:{borderColor:n.productName&&"#bf0000"},placeholder:"Nombre...",value:S,onChange:function(e){return s(e.target.value)},name:"productName",ref:r({required:!1,defaultValues:{nameValue:S}})}),n.productCategory&&Object(y.jsx)(g.a,{role:"alert",children:"*El campo es obligario"}),Object(y.jsx)(O.m,{style:{borderColor:n.productCategory&&"#bf0000"},placeholder:"Categor\xeda...",name:"productCategory",value:C,onChange:function(e){return u(e.target.value)},ref:r({required:!1,defaultValues:{categoryValue:C}})}),n.size&&Object(y.jsx)(g.a,{role:"alert",children:"*Se requiere la unidad de medida"}),Object(y.jsx)(O.m,{style:{borderColor:n.productSize&&"#bf0000"},defaultValue:k,onChange:function(e){return f(e.target.value)},placeholder:"Cantidad/Tama\xf1o...",name:"size",ref:r({required:!1,defaultValues:{sizeValue:k},pattern:{value:/^(?:[0-9]+\s\w+[a-z]|[a-z]+[0-9])[a-z0-9]*$/i}})}),n.productPrice&&Object(y.jsx)(g.a,{role:"alert",children:"*Solo se admiten n\xfameros"}),Object(y.jsx)(O.m,{placeholder:"Precio...",style:{borderColor:n.productPrice&&"#bf0000"},name:"productPrice",value:z,onChange:function(e){return l(e.target.value)},ref:r({required:!1,defaultValues:{priceValue:z},pattern:{value:[-9]}})}),n.category&&Object(y.jsx)(g.a,{role:"alert",children:n.category.message}),Object(y.jsx)(O.i,{name:"category",style:{borderColor:n.category&&"#bf0000"},onChange:function(e){return u(e.target.value)},ref:r({required:"*El campo es requrido"}),children:null===t||void 0===t?void 0:t.map((function(e){return Object(y.jsx)(O.h,{value:null===e||void 0===e?void 0:e.name,selected:(null===C||void 0===C?void 0:C.toLowerCase())===(null===e||void 0===e?void 0:e.name),children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)}))}),n.description&&Object(y.jsx)(g.a,{role:"alert",children:n.description.message}),Object(y.jsx)(O.c,{placeholder:"Descripci\xf3n...",style:{borderColor:n.description&&"#bf0000"},value:w,name:"description",onChange:function(e){return v(e.target.value)},ref:r({required:"*El campo es requerido",defaultValues:{descriptionValue:w}})}),Object(y.jsx)(O.d,{type:"file",name:"img",ref:r({required:!1})}),Object(y.jsx)(O.j,{state:(null===o||void 0===o?void 0:o.active)?"checked":null}),q&&Object(y.jsx)(h.a,{small:!0}),Object(y.jsxs)(O.a,{children:[Object(y.jsx)(O.g,{as:"input",type:"submit",value:"Cargar"}),Object(y.jsx)(O.k,{as:"input",type:"reset",value:"Abortar"})]})]})]})})}var C,z=r(17),k=r(93),w=n.b.main(C||(C=Object(a.a)(["\npadding-top: 60px ;\nmargin:0;\n min-height:100vh;\nwidth:100vw;\n"])));t.default=function(){return Object(y.jsxs)(w,{children:[Object(y.jsx)(k.LinksWrapper,{children:Object(y.jsx)(z.a,{to:"/dashboard/myProducts",children:"Regresar"})}),Object(y.jsx)(S,{})]})}}}]);
//# sourceMappingURL=3.6ed85cbc.chunk.js.map