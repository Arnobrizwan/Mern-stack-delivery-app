{"version":3,"sources":["API/usersAPI.js","API/currentUserAPI.js","API/upldateProfileAPI.js","img/user-edit-solid.svg","components/account/EditMyProfile.js","hooks/useEditProfileForm.js"],"names":["a","token","setAllUsers","headers","Headers","append","setting","method","fetch","res","json","data","status","console","log","getUsers","setCurrentUser","id","localStorage","getItem","getCurrentUser","setFormIsLoading","setIsSuccessfullySend","setServerError","info","isAdmin","history","body","JSON","stringify","usersAPI","currentUserAPI","setTimeout","push","message","UploadProfileAPI","EditProfilePage","styled","section","EditProfileForm","form","OptionList","InputWrapper","div","FormIcone","img","GoToProfileLink","GoBackLink","NewPasswordCheckbox","setIsChangingPassword","value","htmlFor","onChange","e","type","name","CellphoneInput","register","errors","placeholder","defaultValue","userNumber","role","ref","required","minLength","maxLength","pattern","style","borderColor","CityAddressOptions","selected","StreetAddressInput","userStreetAddress","StreetNumberInput","userStreetNumber","withError","useStorage","currentUser","useState","serverError","isChangingPassword","formIsLoading","defaultsValues","split","lastName","street","address","slice","join","streetNumber","splice","number","city","trim","useHistory","useForm","mode","preventDefault","target","userName","toLowerCase","userLastName","userCityAddress","password","userPassword","newPassword","userNewPassword","upldateProfileAPI","handleSubmit","formState","onSubmit","useEditProfileForm","to","novalidate","src","userEditIcone","alt","LoaderSpinner","small"],"mappings":"uLAAA,uCAAAA,EAAA,6DAAyBC,EAAzB,EAAyBA,MAAMC,EAA/B,EAA+BA,aAClBC,EAAU,IAAIC,SACXC,OAAO,SAAU,oBAC3BF,EAAQE,OAAO,gBAAf,iBAA0CJ,IAGtCK,EAAU,CACVC,OAAQ,MACRJ,QAASA,GARnB,kBAakBK,MAAM,aAAcF,GAbtC,cAaMG,EAbN,iBAcqBA,EAAIC,OAdzB,QAcQC,EAdR,OAemB,MAAfF,EAAIG,QAENV,EAAYS,GAjBd,kDAwBME,QAAQC,IAAR,MAxBN,2D,sBA6BiBC,I,sJC7BjB,2CAAAf,EAAA,6DAA+BgB,EAA/B,EAA+BA,eAAef,EAA9C,EAA8CA,MAEpCgB,EAAKC,aAAaC,QAAQ,WAEtBhB,EAAU,IAAIC,SACZC,OAAO,SAAU,oBAC3BF,EAAQE,OAAO,gBAAf,iBAA0CJ,IAGtCK,EAAU,CACVC,OAAQ,MACRJ,QAASA,GAXnB,kBAgBkBK,MAAM,iBAAD,OAAkBS,GAAKX,GAhB9C,cAgBMG,EAhBN,iBAiBuBA,EAAIC,OAjB3B,iBAiBSC,EAjBT,EAiBSA,KAETK,EAAeL,GAnBf,kDAwBME,QAAQC,IAAR,MAxBN,2D,sBA6BiBM,I,0OC1BjB,yDAAApB,EAAA,6DACEqB,EADF,EACEA,iBACFC,EAFA,EAEAA,sBACAC,EAHA,EAGAA,eACAC,EAJA,EAIAA,KACAC,EALA,EAKAA,QACAvB,EANA,EAMAA,YACAD,EAPA,EAOAA,MACAe,EARA,EAQAA,eACAU,EATA,EASAA,QATA,SAYEL,GAAiB,GAChBE,EAAe,IAOVN,EAAKC,aAAaC,QAAQ,WAIvBhB,EAAU,IAAIC,SACTC,OAAO,SAAU,oBACjCF,EAAQE,OAAO,eAAgB,oBACzBF,EAAQE,OAAO,gBAAf,iBAA0CJ,IAElCK,EAAU,CACdC,OAAQ,MACRJ,QAASA,EACTwB,KAAMC,KAAKC,UAAUL,IAhC/B,UAqCwBhB,MAAM,iBAAD,OAAkBS,GAAMX,GArCrD,eAqCYG,EArCZ,iBAsC8BA,EAAIC,OAtClC,WAsCiBA,EAtCjB,OAwCAW,GAAiB,GAEU,MAAfZ,EAAIG,OA1ChB,yBA6CUa,GA7CV,uCA6C4BK,YAAS,CAAC7B,QAAMC,gBA7C5C,yBA+Ca6B,YAAe,CAAC9B,QAAMe,mBA/CnC,eAiDSM,GAAsB,GACtBU,YAAW,WAEFV,GAAsB,GAEpBI,EAAQO,KAAK,0BACrB,KAvDZ,2BA4DSC,EAAWxB,EAAXwB,QACDrB,QAAQC,IAAIoB,GAKdX,EAAeW,GAlErB,kDAsEErB,QAAQC,IAAR,MAtEF,2D,sBA6EeqB,M,qGChFA,MAA0B,4C,OCanCC,EAAkBC,IAAOC,QAAV,uFAMfC,EAAkBF,IAAOG,KAAV,odAqBhBC,KAUGC,EAAeL,IAAOM,IAAV,yFAOdC,EAAYP,IAAOQ,IAAV,mGAMTC,EAAkBT,YAAOU,IAAPV,CAAH,8GASrB,SAASW,EAAT,GAA4D,IAA9BC,EAA6B,EAA7BA,sBAAsBC,EAAO,EAAPA,MAGjD,OACO,eAAC,IAAD,WACV,uBAAOC,QAAQ,sBAAf,oCACA,uBACAC,SAAU,SAACC,GAAMJ,GAAuBC,IACxCjC,GAAG,sBAAsBqC,KAAK,WAAWC,KAAK,2BAI9C,SAASC,EAAT,GAAqE,IAA5CC,EAA2C,EAA3CA,SAASC,EAAkC,EAAlCA,OAAOC,EAA2B,EAA3BA,YAAYC,EAAe,EAAfA,aAEnD,OACF,eAAC,WAAD,WACKF,EAAOG,YAAc,cAAC,IAAD,CAAeC,KAAK,QAApB,SAA6BJ,EAAOG,WAAW3B,UAEzE,cAAC,IAAD,CACAyB,YAAaA,EACZJ,KAAK,aACLD,KAAK,OACAM,aAAcA,GAAgB,GAC1BG,IAAKN,EAAS,CACVO,SAAU,wBACNC,UAAW,CACjBf,MAAO,EACPhB,QAAS,yBAEVgC,UAAW,CACVhB,MAAO,GACPhB,QAAS,yBAEAiC,QAAS,CAClBjB,MAAO,QACPhB,QAAS,iCAGVkC,MAAO,CAAEC,YAAaX,EAAOG,YAAc,gBAItD,SAASS,EAAT,GAAqD,IAAxBb,EAAuB,EAAvBA,SAASG,EAAc,EAAdA,aACpC,OACC,eAAC,IAAD,CAAYL,KAAK,kBACjBQ,IAAKN,EAAS,CACNO,SAAU,0BAFlB,UAOH,cAAC,IAAD,CAAQd,MAAM,aAAWqB,SAA2B,eAAjBX,EAAnC,wBACA,cAAC,IAAD,CAAQV,MAAM,eAAeqB,SAA2B,iBAAjBX,EAAvC,6BAIA,SAASY,EAAT,GAAyE,IAA5Cd,EAA2C,EAA3CA,OAAOC,EAAoC,EAApCA,YAAYF,EAAwB,EAAxBA,SAASG,EAAe,EAAfA,aAEvD,OACF,eAAC,WAAD,WACKF,EAAOe,mBAAqB,cAAC,IAAD,CAAeX,KAAK,QAApB,SAA6BJ,EAAOe,kBAAkBvC,UAEvF,cAAC,IAAD,CACAyB,YAAaA,EACZJ,KAAK,oBACDK,aAAcA,GAAgB,GACzBG,IAAKN,EAAS,CACbO,SAAU,0BAGVI,MAAO,CAAEC,YAAaX,EAAOe,mBAAqB,gBAI7D,SAASC,EAAT,GAAwE,IAA5ChB,EAA2C,EAA3CA,OAAOC,EAAoC,EAApCA,YAAYF,EAAwB,EAAxBA,SAASG,EAAe,EAAfA,aAEtD,OACF,eAAC,WAAD,WACKF,EAAOiB,kBAAoB,cAAC,IAAD,CAAeb,KAAK,QAApB,SAA6BJ,EAAOiB,iBAAiBzC,UAErF,cAAC,IAAD,CACAyB,YAAaA,EACZJ,KAAK,mBACDK,aAAcA,GAAgB,GACzBG,IAAKN,EAAS,CACpBO,SAAU,wBAEHE,UAAW,CACVhB,MAAO,EACPhB,QAAS,uBAEAiC,QAAS,CAClBjB,MAAO,QACPhB,QAAS,iCAGVkC,MAAO,CAAEC,YAAaX,EAAOiB,kBAAoB,gBAiE7CC,uBA3Dd,WAA0B,IAAD,ECtKX,WAA8B,IAAD,EAE2CC,cAA9E5E,EAFmC,EAEnCA,MAAMe,EAF6B,EAE7BA,eAAed,EAFc,EAEdA,YAAYuB,EAFE,EAEFA,QAAQH,EAFN,EAEMA,sBAAsBwD,EAF5B,EAE4BA,YAF5B,EAILC,mBAAS,IAJJ,mBAInCC,EAJmC,KAIvBzD,EAJuB,OAKWwD,oBAAS,GALpB,mBAKjCE,EALiC,KAKdhC,EALc,OAMH8B,oBAAS,GANN,mBAMrCG,EANqC,KAMvB7D,EANuB,KAQtC8D,EAAiB,CACrB5B,KAAKuB,EAAYvB,KAAK6B,MAAM,KAAK,GACjCC,SAASP,EAAYvB,KAAK6B,MAAM,KAAK,GACrCE,OAAOR,EAAYS,QAAQH,MAAM,KAAK,GAAGA,MAAM,KAAKI,MAAM,GAAG,GAAGC,KAAK,KACrEC,aAAaZ,EAAYS,QAAQH,MAAM,KAAK,GAAGA,MAAM,KAAKO,QAAQ,GAClEC,OAAQd,EAAYc,OACtBC,KAAKf,EAAYS,QAAQH,MAAM,KAAK,GAAGU,QAG9BpE,EAAUqE,cAjByB,EAmBiBC,YAAQ,CACnEC,KAAM,WApBoC,4CAuB5C,WAAwBtF,EAAK0C,GAA7B,uDAAArD,EAAA,6DAECqD,EAAE6C,iBAGG3C,EALN,OAKcF,QALd,IAKcA,GALd,UAKcA,EAAG8C,cALjB,iBAKc,EAAWC,gBALzB,iBAKc,EAAqBlD,aALnC,aAKc,EAA4BmD,cACzChB,EAND,OAMahC,QANb,IAMaA,GANb,UAMaA,EAAG8C,cANhB,iBAMa,EAAWG,oBANxB,iBAMa,EAAyBpD,aANtC,aAMa,EAAgCmD,cAC7CR,EAPA,UAOOxC,EAAE8C,OAAOI,uBAPhB,iBAOO,EAA0BrD,aAPjC,aAOO,EAAiCmD,cACxCf,EARA,UAQSjC,EAAE8C,OAAO1B,yBARlB,iBAQS,EAA4BvB,aARrC,aAQS,EAAmCmD,cAEtC7E,EAAM,CACZ+B,OACA8B,WACAmB,UAAU,OAADnD,QAAC,IAADA,GAAA,UAAAA,EAAG8C,cAAH,mBAAWM,oBAAX,eAAyBvD,QAAS,KAC3CwD,aAAa,OAADrD,QAAC,IAADA,GAAA,UAAAA,EAAG8C,cAAH,mBAAWQ,uBAAX,eAA4BzD,QAAS,KACjD0C,OAAM,UAACvC,EAAE8C,OAAOtC,kBAAV,aAAC,EAAqBX,MAC5B2C,OACAP,SACAI,aAAY,UAAErC,EAAE8C,OAAOxB,wBAAX,aAAE,EAA2BzB,OAlBzC,SAoBO0D,EAAkB,CACvBvF,mBACFC,wBACAC,iBACAC,OACAC,UACAvB,cACAD,QACAyB,YA5BA,4CAvB4C,sBA2D1C,MAAO,CACL+B,SA5DwC,EAmBhCA,SA0CRoD,aA7DwC,EAmBtBA,aA2ClBnD,OA9DwC,EAmBRoD,UAAapD,OA4C7CqD,SA/DwC,8CAgExC/B,cACAhE,iBACJkE,gBACAC,iBACAF,qBACAhC,yBDqGoI+D,GAA5HvD,EAJkB,EAIlBA,SAASoD,EAJS,EAITA,aAAanD,EAJJ,EAIIA,OAAOqD,EAJX,EAIWA,SAAU/B,EAJrB,EAIqBA,YAAYE,EAJjC,EAIiCA,cAAcD,EAJ/C,EAI+CA,mBAAmBhC,EAJlE,EAIkEA,sBAAsBkC,EAJxF,EAIwFA,eAEhH,OACF,eAAC/C,EAAD,WAGI,cAACU,EAAD,CAAiBmE,GAAG,uBAApB,sBAGF,eAAC1E,EAAD,CAAiBwE,SAAUF,EAAaE,GAAWG,YAAU,EAA7D,UAEE,cAACtE,EAAD,CAAWuE,IAAKC,EAAeC,IAAI,iBACvC,cAAC,IAAD,CAAgB3D,OAAQA,EAAQD,SAAUA,EAAUG,aAAcuB,EAAe5B,OAC9E,cAAC,IAAD,CAAoBG,OAAQA,EAAQD,SAAUA,EAAUG,aAAcuB,EAAeE,WAIzE,cAAC7B,EAAD,CAAgBI,aAAcuB,EAAeS,OAAQlC,OAAQA,EAAQD,SAAUA,EAAWE,YAAY,sBAErH,cAACW,EAAD,CAAoBb,SAAUA,EAAUG,aAAcuB,EAAeU,OAE5D,cAACrB,EAAD,CAAqBd,OAAQA,EAAQD,SAAUA,EAAUE,YAAY,WAAWC,aAAcuB,EAAeG,SAE7G,cAACZ,EAAD,CAAoBhB,OAAQA,EAAQD,SAAUA,EAAUE,YAAY,yBAAsBC,aAAcuB,EAAeO,eAC/H,cAAChD,EAAD,UACE,cAACM,EAAD,CAAqBC,sBAAwBA,EAAuBC,MAAO+B,MAG1EA,EAEJ,eAAC,WAAD,WACA,cAAC,IAAD,CAAoBvB,OAAQA,EAASD,SAAUA,EAAUF,KAAK,eAAeI,YAAY,wBACpF,cAAC,IAAD,CAAuBD,OAAQA,EAAUD,SAAUA,EAAUF,KAAK,cAAcI,YAAY,8BAE/F,KAKEuB,EAAiB,cAACoC,EAAA,EAAD,CAAeC,OAAK,IAEhC,cAAC,IAAD,UAAqBvC,IAIpB,cAAC,IAAD,CAAauC,OAAK","file":"static/js/16.0c6538cd.chunk.js","sourcesContent":["async function getUsers({token,setAllUsers}){\r\n       const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n    const setting = {\r\n          method: 'GET',\r\n          headers: headers,\r\n\r\n        }\r\n    try{\r\n\r\nconst res = await fetch('/api/users', setting);\r\n  const data = await res.json()\r\nif (res.status === 200){\r\n\r\n  setAllUsers(data)\r\n\r\n}\r\n\r\n\r\n    }catch(err){\r\n\r\n      console.log(err)\r\n    }\r\n\r\n  };\r\n  \r\n  export default getUsers","async function getCurrentUser({setCurrentUser,token}){\r\n\r\n    const id = localStorage.getItem('userId')\r\n    \r\n        const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n    const setting = {\r\n          method: 'GET',\r\n          headers: headers,\r\n\r\n        }\r\n    try{\r\n\r\nconst res = await fetch(`/api/users/me/${id}`,setting);\r\n  const {data} = await res.json()\r\n\r\nsetCurrentUser(data)\r\n\r\n\r\n    }catch(err){\r\n\r\n      console.log(err)\r\n    }\r\n\r\n  };\r\n\r\n  export default getCurrentUser","import currentUserAPI from './currentUserAPI'\r\nimport usersAPI from './usersAPI'\r\n\r\nasync function UploadProfileAPI({\r\n  setFormIsLoading,\r\nsetIsSuccessfullySend,\r\nsetServerError,\r\ninfo,\r\nisAdmin,\r\nsetAllUsers,\r\ntoken,\r\nsetCurrentUser,\r\nhistory,\r\n}){\r\n  try{\r\n  setFormIsLoading(true)\r\n   setServerError(\"\");\r\n\r\n\r\n\r\n\r\n\r\n\r\n  const id = localStorage.getItem('userId');\r\n\r\n\r\n\r\n     const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\nheaders.append('Content-Type', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n        const setting = {\r\n          method: 'PUT',\r\n          headers: headers,\r\n          body: JSON.stringify(info),\r\n        }\r\n\r\n\r\n\r\n        let res = await fetch(`/api/users/me/${id}`, setting);\r\n            let  json = await res.json()\r\n\r\nsetFormIsLoading(false)\r\n\r\n         if(res.status === 200) {\r\n        \r\n\r\n         (isAdmin) && await usersAPI({token,setAllUsers})\r\n\r\n       await currentUserAPI({token,setCurrentUser})\r\n\r\n         setIsSuccessfullySend(true);\r\n         setTimeout(() => {\r\n\r\n                  setIsSuccessfullySend(false)\r\n\r\n                    history.push(\"/myAccount/myProfile\")\r\n         }, 3000);\r\n\r\n     return\r\n      }\r\n      \r\n  const {message} = json\r\n        console.log(message)\r\n\r\n\r\n \r\n\r\n      setServerError(message)\r\n      \r\n}catch(err){\r\n\r\n  console.log(err)\r\n}\r\n\r\n\r\n\r\n}\r\n\r\nexport default UploadProfileAPI","export default __webpack_public_path__ + \"static/media/user-edit-solid.3b6cccdd.svg\";","import styled from 'styled-components'\r\nimport { withError } from './../withError'\r\nimport {Fragment} from 'react' \r\nimport useEditProfileForm from '../../hooks/useEditProfileForm'\r\nimport {LoaderSpinner} from './../LoaderSpinner'\r\nimport {ErrorMessage} from '../contact/ContactForm';\r\nimport {UserNameInput,UserLastNameInput,UserPasswordInput,UserNewPasswordInput,ErrorServerMessage} from '../auth/SingupForm'\r\nimport {OptionList,Option,CheckboxWrapper} from '../dashboard/CreateNewProductForm'\r\nimport {FormButtons } from '../dashboard/CreateNewProductForm'\r\nimport {TextInput } from '../contact/ContactForm';\r\nimport {GoBackLink} from '../product_details/ProductDetails'\r\nimport userEditIcone from '../../img/user-edit-solid.svg'\r\n\r\nconst EditProfilePage = styled.section`\r\n    min-height:100vh;\r\nwidth:100vw;\r\npadding: 60px 0px;\r\n\r\n`\r\nconst EditProfileForm = styled.form`\r\n\r\n  max-width:400px;\r\n  width:100%;\r\n      padding: 10px 25px 40px;\r\n    border-radius: 10px;\r\n    background: #fff;\r\nmargin: 50px auto;\r\ndisplay:flex;\r\nflex-flow:column;\r\nalign-items:center;\r\n& > input {\r\n  border:none;\r\n  background: #f0f0f0;\r\n}\r\n&> label {\r\n  margin: 0 auto 20px\r\n}\r\n&> small {\r\nmargin: -10px auto 4px 0;\r\n}\r\n& >${OptionList} {\r\n  min-width: 100%\r\n}\r\n\r\n& > input:focus {\r\n  outline: 2px solid #ccc;\r\n    outline-style: auto;\r\n}\r\n  `\r\n\r\n  const InputWrapper = styled.div`\r\n  margin-top:-15px;\r\n  & > label{\r\nfont-size:16px;\r\n  }\r\n\r\n  `;\r\nconst FormIcone = styled.img`\r\nwidth:120px;\r\nmargin: 0 auto;\r\nmargin-bottom:20px;\r\nmargin-top:-20px;\r\n`\r\nconst GoToProfileLink = styled(GoBackLink)`\r\nmargin-left: 15px;\r\n&:before{\r\n      content: \"<-- \";\r\n    margin-right: 3px;\r\n}\r\n`\r\n\r\n\r\nfunction NewPasswordCheckbox({setIsChangingPassword,value}){\r\n\r\n\r\n   return(\r\n          <CheckboxWrapper >\r\n<label htmlFor=\"newPasswordCheckbox\">Cambiar contraseña:</label>\r\n<input\r\nonChange={(e) =>{setIsChangingPassword(!value)}}\r\nid=\"newPasswordCheckbox\" type=\"checkbox\" name=\"newPasswordCheckbox\" />\r\n          </CheckboxWrapper>\r\n    )\r\n  }\r\nfunction CellphoneInput({register,errors,placeholder,defaultValue}) {\r\n  \r\n  return(\r\n<Fragment>\r\n    {errors.userNumber && <ErrorMessage  role=\"alert\">{errors.userNumber.message}</ErrorMessage>}\r\n\r\n<TextInput\r\nplaceholder={placeholder}\r\n name=\"userNumber\"\r\n type='text'\r\n      defaultValue={defaultValue || ''}\r\n          ref={register({\r\n              required: '*El campo es requrido',\r\n                  minLength: {\r\n            value: 9,\r\n            message: \"*Teléfono Invalido\"\r\n                                      },\r\n           maxLength: {\r\n            value: 10,\r\n            message: \"*Teléfono Invalido\"\r\n                                      },                                      \r\n                     pattern: {\r\n            value: /[0-9]/,\r\n            message: \"*Solo se aceptan números\"\r\n          } \r\n          })}\r\n           style={{ borderColor: errors.userNumber && \"#bf0000\" }}/>\r\n</Fragment>\r\n  )\r\n} \r\nfunction CityAddressOptions({register,defaultValue}){\r\n  return(\r\n   <OptionList name=\"userCityAddress\"\r\n   ref={register({\r\n           required: '*El campo es requrido',\r\n        \r\n          })}\r\n   \r\n   >\r\n<Option value=\"Córdoba\"  selected={defaultValue === 'córdoba' ? true :false}>Córdoba</Option>\r\n<Option value=\"Buenos Aires\" selected={defaultValue === 'buenos aires' ? true :false}>Buenos Aires</Option>\r\n</OptionList>\r\n  );\r\n}\r\nfunction StreetAddressInput({errors,placeholder,register,defaultValue}) {\r\n  \r\n  return(\r\n<Fragment>\r\n    {errors.userStreetAddress && <ErrorMessage  role=\"alert\">{errors.userStreetAddress.message}</ErrorMessage>}\r\n\r\n<TextInput\r\nplaceholder={placeholder}\r\n name=\"userStreetAddress\" \r\n     defaultValue={defaultValue || ''}\r\n          ref={register({\r\n           required: '*El campo es requrido',\r\n        \r\n          })}\r\n           style={{ borderColor: errors.userStreetAddress && \"#bf0000\" }}/>\r\n</Fragment>\r\n  )\r\n} \r\nfunction StreetNumberInput({errors,placeholder,register,defaultValue}) {\r\n  \r\n  return(\r\n<Fragment>\r\n    {errors.userStreetNumber && <ErrorMessage  role=\"alert\">{errors.userStreetNumber.message}</ErrorMessage>}\r\n\r\n<TextInput\r\nplaceholder={placeholder}\r\n name=\"userStreetNumber\" \r\n     defaultValue={defaultValue || ''}\r\n          ref={register({\r\n    required: '*El campo es requrido',\r\n            \r\n           maxLength: {\r\n            value: 4,\r\n            message: \"*Número Invalido\"\r\n                                      },                                      \r\n                     pattern: {\r\n            value: /[0-9]/,\r\n            message: \"*Solo se aceptan números\"\r\n          } \r\n          })}\r\n           style={{ borderColor: errors.userStreetNumber && \"#bf0000\" }}/>\r\n</Fragment>\r\n  )\r\n} \r\n\r\n\r\n function EditMyProfile() {\r\n  \r\n\r\n\r\nconst { register,handleSubmit,errors,onSubmit ,serverError,formIsLoading,isChangingPassword,setIsChangingPassword,defaultsValues} = useEditProfileForm()\r\n\r\n  return(\r\n<EditProfilePage>\r\n\r\n  \r\n    <GoToProfileLink to=\"/myAccount/myProfile\" >Regresar</GoToProfileLink>\r\n  \r\n\r\n  <EditProfileForm onSubmit={handleSubmit(onSubmit)} novalidate>\r\n\r\n    <FormIcone src={userEditIcone} alt=\"edit-profile\"/>\r\n<UserNameInput  errors={errors} register={register} defaultValue={defaultsValues.name}/>\r\n   <UserLastNameInput  errors={errors} register={register} defaultValue={defaultsValues.lastName} />\r\n  \r\n     \r\n \r\n               <CellphoneInput defaultValue={defaultsValues.number} errors={errors} register={register}  placeholder=\"Tu telèfono...\" />\r\n\r\n<CityAddressOptions register={register} defaultValue={defaultsValues.city} />\r\n\r\n         <StreetAddressInput  errors={errors} register={register} placeholder=\"Calle...\" defaultValue={defaultsValues.street}/>\r\n\r\n         <StreetNumberInput  errors={errors} register={register} placeholder=\"Número de puerta...\" defaultValue={defaultsValues.streetNumber } / >\r\n <InputWrapper >\r\n   <NewPasswordCheckbox setIsChangingPassword ={setIsChangingPassword} value={isChangingPassword} />\r\n   </InputWrapper>\r\n\r\n   {isChangingPassword ? \r\n\r\n<Fragment>\r\n<UserPasswordInput  errors={errors}  register={register} name=\"userPassword\" placeholder=\"Tu contraseña...\"/>\r\n     <UserNewPasswordInput  errors={errors}   register={register} name=\"newPassword\" placeholder=\"Nueva contraseña...\"/>\r\n</Fragment>\r\n: null\r\n}\r\n     \r\n\r\n       \r\n   {formIsLoading ?  <LoaderSpinner small /> :\r\n\r\n         <ErrorServerMessage>{serverError}</ErrorServerMessage>\r\n      \r\n  }\r\n  \r\n          <FormButtons small/>\r\n  </EditProfileForm>\r\n\r\n</EditProfilePage>\r\n\r\n  );\r\n\r\n  \r\n}\r\n\r\nexport default withError(EditMyProfile)","import {useForm} from 'react-hook-form';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {useState} from 'react' \r\nimport {useStorage} from '../context/useStorage'\r\nimport upldateProfileAPI from '../API/upldateProfileAPI'\r\n\r\n\r\n\r\nexport default function useEditProfileForm(){\r\n  \r\n  const {token,setCurrentUser,setAllUsers,isAdmin,setIsSuccessfullySend,currentUser} = useStorage()\r\n  \r\n  const [serverError,setServerError] = useState(\"\");\r\n    const [isChangingPassword,setIsChangingPassword] = useState(false);\r\nconst [formIsLoading,setFormIsLoading] = useState(false);\r\n\r\nconst defaultsValues = {\r\n  name:currentUser.name.split(' ')[0],\r\n  lastName:currentUser.name.split(' ')[1],\r\n  street:currentUser.address.split(',')[0].split(' ').slice(0,-1).join(' '),\r\n  streetNumber:currentUser.address.split(',')[0].split(' ').splice(-1) ,\r\n  number: currentUser.number,\r\ncity:currentUser.address.split(',')[1].trim(),\r\n}\r\n\r\n   const history = useHistory()\r\n\r\n    const { register, handleSubmit, formState: { errors } }= useForm({\r\n  mode: \"onBlur\",\r\n});\r\n\r\nasync function onSubmit(data,e) {\r\n\r\n e.preventDefault()\r\n\r\n \r\nconst name =  e?.target?.userName?.value?.toLowerCase(),\r\n lastName =  e?.target?.userLastName?.value?.toLowerCase(),\r\ncity = e.target.userCityAddress?.value?.toLowerCase(),\r\nstreet = e.target.userStreetAddress?.value?.toLowerCase();\r\n\r\nconst info ={\r\nname,\r\nlastName,\r\npassword:e?.target?.userPassword?.value || null,\r\nnewPassword:e?.target?.userNewPassword?.value || null,\r\nnumber:e.target.userNumber?.value,\r\ncity,\r\nstreet,\r\nstreetNumber: e.target.userStreetNumber?.value\r\n}\r\n await upldateProfileAPI({\r\n  setFormIsLoading,\r\nsetIsSuccessfullySend,\r\nsetServerError,\r\ninfo,\r\nisAdmin,\r\nsetAllUsers,\r\ntoken,\r\nhistory,\r\n})\r\n\r\n\r\n  }\r\n  \r\n\r\n\r\n  return {\r\n    register,\r\n    handleSubmit,\r\n    errors,\r\n    onSubmit ,\r\n    serverError,\r\n    setCurrentUser,\r\nformIsLoading,\r\ndefaultsValues,\r\nisChangingPassword,\r\nsetIsChangingPassword\r\n} \r\n\r\n  \r\n}"],"sourceRoot":""}