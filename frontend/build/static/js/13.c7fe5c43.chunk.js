(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[13],{147:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r,a,o,c=t(3),i=t(2),s=t(0),d=i.b.div(r||(r=Object(c.a)(["\nwidth:100%;\nmax-width:900px;\nmargin:20px auto 0;\nbackground:gray;\nbox-shadow: 1px 1px 5px #00000057;\nbackground:#f3f3f3;\n@media screen and (max-width: 750px){\n   max-width: 400px;\n}\n"]))),l=i.b.div(a||(a=Object(c.a)(["\nwidth:100%;\nheight:60px;\nbackground:#ccc;\nbox-shadow: 1px 1px 5px #00000057;\nborder-bottom:1px solid #ccc;\n"]))),u=i.b.div(o||(o=Object(c.a)(["\nwith:100%;\nheight:50px;\nbackground:white;\nmargin: 1px 0;\nbackground:#fff;\nborder-bottom:1px solid #ccc;\nbox-shadow: 0 1px 3px #ccc;\n\n@media screen and (max-width: 750px){\nheight:100px;\n}\n"])));function p(){return Object(s.jsxs)(d,{children:[Object(s.jsx)(l,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{}),Object(s.jsx)(u,{})]})}},148:function(e,n,t){"use strict";n.a=t.p+"static/media/refresh.f1c42ba5.svg"},153:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t(6),a=t.n(r),o=t(10);function c(e){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(a.a.mark((function e(n){var t,r,o,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("Accept","application/json"),r={method:"GET",headers:t},e.prev=3,e.next=6,fetch("/api/categories",r);case 6:return o=e.sent,e.next=9,o.json();case 9:c=e.sent,i=c.data,n(i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}},155:function(e,n,t){"use strict";t.r(n),t.d(n,"TableHead",(function(){return R})),t.d(n,"OrdersTable",(function(){return T})),t.d(n,"RefreshButton",(function(){return F})),t.d(n,"RefreshIcone",(function(){return B})),t.d(n,"default",(function(){return M}));var r=t(56),a=t(3),o=t(2),c=t(1),i=t(11),s=t(5),d=t(6),l=t.n(d),u=t(10),p=t(7),b=t(9);function h(){return(h=Object(u.a)(l.a.mark((function e(n){var t,r,a,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.token,r=n.id,(a=new Headers).append("Accept","application/json"),a.append("Authorization","Bearer ".concat(t)),o={method:"DELETE",headers:a},e.prev=5,e.next=8,fetch("/api/orders/".concat(r),o);case 8:return c=e.sent,e.next=11,c.json();case 11:i=e.sent,204!==c&&console.log(i.message),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}var x=function(e){return h.apply(this,arguments)};var f,j,g,m,O,v,w,y,k=t(131),S=t(137),C=t(135),P=t(147),A=t(148),D=t(32),L=t(0),I=o.b.main(f||(f=Object(a.a)(["\n    padding: 65px 5px;\nmin-height:100vh;\nwidth:100%;\nmargin: 0 auto;\ntext-align:center;\nbackground:",";\n  &:before{\n    display: ",';\n      position:absolute;\n      content:" ";\n      top:0;\n      left:0;\n    right:0;\n    bottom:0;\n    background:#ffffff57;\n    z-index:400;\n    }\n       & >'," {\n  position: fixed;\n    top: 50%;\n    left: 50%;\n    z-index: 500;\n    margin: -60px 0  0 -60px ;\n\n}\n"])),(function(e){return e.theme.lightYellow}),(function(e){return e.isLoading?"block":"none"}),D.a),R=o.b.thead(j||(j=Object(a.a)(["\nbackground-color: ",";\ncolor: ",';\n& > tr th {\n   padding: 10px 0;\n       font-family: "Oswald", sans-serif;\n       font-size:19px;\n}\n'])),(function(e){return e.theme.black}),(function(e){return e.theme.darckYellow})),T=o.b.table(g||(g=Object(a.a)(["\n    width: 100%;\nmax-width:900px;\nmargin: 20px auto 30px;\n    border-spacing: 10px;\n    border-collapse: collapse;\n    border: 2px solid ",";\n        box-shadow: ",";\n        text-transform: capitalize;\n&> tbody{\n  background:#fff;\n}\n& > tbody td span + span{\n       margin-right: 5px;\n}\n& >tbody td {\n  padding: 10px 0;\n  cursor:pointer;\n}\n& > tbody tr {\n     border-bottom: 1px solid;\n}\n@media screen and (max-width: 750px){\n   max-width: 400px;\n  & > ","{\n  display: none;\n    max-width: 400px;\n}\n& tbody tr {\ndisplay: flex;\n  flex-direction: column;\n          border-bottom: 1px solid rgb(0 0 0 / 45%);\n}\n& >  tbody tr td {\n      display: flex;\n    padding: 5px 15px;\n    text-align: right;\n}\n& >  tbody tr td:first-child {\n  color:#fff;\n  padding: 10px 15px;\nbackground-color: ",';\n}\n& >  tbody tr td:first-child:before {\ncontent:"N\xba de Pedido";\n    color: ',';\n}\n& >  tbody tr td:nth-child(3):before {\ncontent:"Direcci\xf3n";\n}\n& >  tbody tr td:nth-child(2):before {\ncontent:"Fecha";\n}\n& >  tbody tr td:nth-child(5):before {\ncontent:"Estado";\n}\n& >  tbody tr td:nth-child(4):before {\ncontent:"Total";\n}\n& >  tbody tr td:nth-child(6):before {\ncontent:"Acciones";\n}\n& >tbody tr td:before{\n      margin-right: auto;\n    font-family: "Oswald", sans-serif;\n    font-size: 16px;\n    align-self: center;\npadding-rigth:5px;\n}\n}\n'])),(function(e){return e.theme.black}),(function(e){return e.theme.lihgtBoxShadow}),R,(function(e){return e.theme.black}),(function(e){return e.theme.darckYellow})),z=o.b.button(m||(m=Object(a.a)(['\npadding:  8px 5px;\ncursor:pointer;\noutline:none;\nmargin: 5px ;\n    border-radius: 10px 5px;\nborder: none;\nfont-family: "Oswald", sans-serif;\ntransition:all 0.5s ;\nopacity:',";\n&:hover {\nbackground:",";\n}\n"])),(function(e){return e.disabled?"0.4":"1"}),(function(e){return e.disabled?"unset":"#cdc8c8"})),E=o.b.div(O||(O=Object(a.a)(["\npadding: 30px 0;\n& >h3{\nmargin-bottom:40px;\n}\n@media screen and (max-width:450px){\n  font-size: 25px;\n}\n& > "," {\n      padding: 15px 30px;\n}\n"])),k.b),N=o.b.h2(v||(v=Object(a.a)(["\nfont-size:50px;\n"]))),F=o.b.div(w||(w=Object(a.a)(["\ncursor:pointer;\npadding:0 10px;\nalign-items: center;\n    border-radius: 5px;\n    height: 40px;\n      box-shadow: ",";\n    background:",";\n\n    margin: -46px 0 10px auto;\n    width: max-content;\ndisplay: flex;\n    transform: scale(0.7);\n    transition: all 0.3s ease;\n&:hover{\n  transform:scale(0.75);\n}\n"])),(function(e){return e.theme.lihgtBoxShadow}),(function(e){return e.theme.black})),B=o.b.img(y||(y=Object(a.a)(["\nheight: 50%;\ncursor:pointer;\n"])));function M(e){var n=function(e){var n=e.setNotification,t=Object(p.g)(),r=Object(b.a)(),a=r.token,o=r.setIsLoading,i=r.currentUser,d=function(){var e=Object(u.a)(l.a.mark((function e(n,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),n.target.disabled){e.next=6;break}return m(!0),e.next=5,x({token:a,id:t});case 5:H();case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=new URLSearchParams,f=Object(c.useState)(!1),j=Object(s.a)(f,2),g=j[0],m=j[1],O=Object(c.useState)(1),v=Object(s.a)(O,2),w=v[0],y=v[1],k=Object(c.useState)(1),S=Object(s.a)(k,2),C=S[0],P=S[1],A=Object(c.useState)([]),D=Object(s.a)(A,2),L=D[0],I=D[1],R=Object(c.useState)(!0),T=Object(s.a)(R,2),z=T[0],E=T[1],N=Object(c.useState)(0),F=Object(s.a)(N,2),B=F[0],M=F[1];h.append("page",w),h.append("limit",5),h.append("sort","-createdAt"),Object(c.useEffect)((function(){n(0);var e=new AbortController,t=e.signal;return function(){var e=Object(u.a)(l.a.mark((function e(){var n,r,o,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,(n=new Headers).append("Accept","application/json"),n.append("Authorization","Bearer ".concat(a)),r={method:"GET",headers:n,signal:t},e.next=8,fetch("/api/orders/user/".concat(i._id,"?").concat(h),r);case 8:return o=e.sent,e.next=11,o.json();case 11:c=e.sent,I(c.data),s=parseInt(c.total),P(Math.ceil(s/5)),document.querySelector("body").scrollTo(0,60),E(!1),m(!1),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log("Fetch Canseled: caught abort"):console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(){return e.apply(this,arguments)}}()(),function(){e.abort()}}),[w,B]);var H=function(){M(Date.now()),y(1)};return{seeDetails:function(e){o(!0),t.push("/myAccount/myOrders/".concat(e))},handleRefresh:H,setPage:y,page:w,isLoading:g,maxPage:C,orders:L,isFirstRender:z,deleteOrder:d}}({setNotification:e.setNotification}),t=n.seeDetails,a=n.handleRefresh,o=n.setPage,d=n.page,h=n.isLoading,f=n.maxPage,j=n.orders,g=n.isFirstRender,m=n.deleteOrder;return Object(L.jsxs)(I,{isLoading:h,children:[h?Object(L.jsx)(D.a,{}):null,Object(L.jsx)(S.SectionTitle,{light:!0,children:"Mis Pedidos"}),Object(L.jsx)(F,{onClick:function(){return a()},children:Object(L.jsx)(B,{onClick:function(){return a()},src:A.a,title:"Refrescar P\xe1gina"})}),h&&g&&Object(L.jsx)(P.a,{}),!h&&!g&&0===(null===j||void 0===j?void 0:j.length)&&Object(L.jsxs)(E,{children:[Object(L.jsx)(N,{children:"\ud83d\udc69\ud83c\udffb\u200d\ud83c\udf73"}),Object(L.jsx)("h3",{children:"Ning\xfan pedido realizado, tienes hambre?"}),Object(L.jsx)(k.b,{small:!0,as:i.b,to:"/menu",children:"Ver Men\xfa"})]}),0!==(null===j||void 0===j?void 0:j.length)&&Object(L.jsxs)(T,{children:[Object(L.jsx)(R,{children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"N\xba de Pedido"}),Object(L.jsx)("th",{children:"Fecha"}),Object(L.jsx)("th",{children:"Direcci\xf3n"}),Object(L.jsx)("th",{children:"Total"}),Object(L.jsx)("th",{children:"Estado"}),Object(L.jsx)("th",{children:"Acciones"})]})}),Object(L.jsx)("tbody",{children:null===j||void 0===j?void 0:j.map((function(e){var n,a;return Object(L.jsxs)("tr",{onClick:function(n){return t(e._id)},children:[Object(L.jsx)("td",{children:null===e||void 0===e?void 0:e.orderID}),Object(L.jsxs)("td",{children:[Object(L.jsx)("span",{children:null===(n=new Date(null===e||void 0===e?void 0:e.states[0].date).toLocaleString())||void 0===n?void 0:n.split(" ")[0]}),Object(L.jsx)("br",{}),Object(L.jsx)("span",{children:null===(a=new Date(null===e||void 0===e?void 0:e.states[0].date).toLocaleString())||void 0===a?void 0:a.split(" ")[1]})]}),Object(L.jsx)("td",{children:e.client[0].address}),Object(L.jsxs)("td",{children:["$",null===e||void 0===e?void 0:e.total]}),Object(L.jsxs)("td",{children:[" ",Object(L.jsx)("b",{children:Object(r.a)(null===e||void 0===e?void 0:e.states).reverse().find((function(e){return!0===e.confirmed})).name})]}),Object(L.jsx)("td",{children:Object(L.jsx)(z,{disabled:!0===(null===e||void 0===e?void 0:e.states[1].confirmed),onClick:function(n){return m(n,e._id)},children:"Cancelar Pedido"})})]},null===e||void 0===e?void 0:e._id)}))})]}),Object(L.jsx)(C.a,{setPage:o,page:d,maxPage:f})]})}},163:function(e,n,t){"use strict";t.r(n),t.d(n,"Page",(function(){return I})),t.d(n,"TableHead",(function(){return R})),t.d(n,"OrdersTable",(function(){return T})),t.d(n,"default",(function(){return z}));var r=t(56),a=t(3),o=t(2),c=t(62),i=t(6),s=t.n(i),d=t(10),l=t(5),u=t(7),p=t(1),b=t(9);var h=t(150),x=t(148),f=t(140),j=t(155),g=t(32),m=t(139),O=t(137),v=t(162),w=t(132),y=t(0);function k(e){var n=e.setStatePreferece,t=e.setPage,r=e.defaultValue;return Object(y.jsxs)(w.b,{defaultValue:r,name:"filterOrdersByState",onChange:function(e){return function(e){e.preventDefault(),t(1),n(e.target.value)}(e)},children:[Object(y.jsx)(w.a,{value:"all",children:"Todos"}),Object(y.jsx)(w.a,{value:"finish",children:"Liquidados"}),Object(y.jsx)(w.a,{value:"unfinish",children:"Pendientes"})]})}function S(e){var n=e.setSortPreferece,t=e.defaultValue;return Object(y.jsxs)(w.b,{defaultValue:t,name:"sortProductBy",onChange:function(e){return n(e.target.value)},children:[Object(y.jsx)(w.a,{value:"-createdAt",children:"M\xe1s recientes"}),Object(y.jsx)(w.a,{value:"createdAt",children:"M\xe1s antiguos"}),Object(y.jsx)(w.a,{value:"total",children:"Menor Monto"}),Object(y.jsx)(w.a,{value:"-total",children:"Mayor Monto"})]})}var C,P,A,D=t(135),L=t(147),I=o.b.section(C||(C=Object(a.a)(["\n    padding: 60px 05px;\nmin-height:100vh;\nwidth:100%;\nmax-width: 1250px;\nmargin: 0 auto;\ntext-align:center;\n  &:before{\n    display: ",';\n      position:absolute;\n      content:" ";\n      top:0;\n      left:0;\n    right:0;\n    bottom:0;\n    background:#ffffff57;\n    z-index:400;\n    }\n       & >'," {\n  position: fixed;\n    top: 50%;\n    left: 50%;\n    z-index: 500;\n    margin: -60px 0  0 -60px ;\n\n}\n& > "," {\n  padding: 0 5px;\n}\n& > "," {\n margin: 30px 5px 0;\n}\n\n"])),(function(e){return e.isLoading?"block":"none"}),g.a,m.a,v.FiltersBoard),R=o.b.thead(P||(P=Object(a.a)(['\nbackground-color: #171717;\ncolor: #fcba1c;\n& >tr th {\n   padding: 10px 0;\n       font-family: "Oswald", sans-serif;\n       font-size:19px;\n}\n']))),T=o.b.table(A||(A=Object(a.a)(["\n    width: 100%;\nmax-width:900px;\nmargin: 20px auto 40px;\n    border-spacing: 10px;\n    border-collapse: collapse;\n    border: 2px solid #171717;\n        text-transform: capitalize;\n\n&> tbody{\n  background:#fff;\n}\n\n& >tbody tr td {\n  padding: 10px 0;\n  cursor:pointer;\n\n}\n& >tbody tr {\n\n  border-bottom: 1px solid ;\n}\n& >tbody tr td small {\n  margin-left:   5px ;\n\n}\n@media screen and (max-width: 750px){\n\n    max-width: 400px;\n\n  & > ",'{\n  display: none;\n  max-width: 400px;\n}\n& tbody tr {\ndisplay: flex;\n  flex-direction: column;\n}\n& >  tbody tr td {\n      display: flex;\n    padding: 5px 15px;\n    text-align: right;\n}\n& >  tbody tr td:first-child {\n  color:#fff;\n  padding: 10px 15px;\nbackground-color: #171717;\n}\n& >  tbody tr td:first-child:before {\ncontent:"N\xba de Pedido";\n    color: ',';\n}\n& >  tbody tr td:nth-child(2):before {\ncontent:"Fecha";\n}\n& >  tbody tr td:nth-child(3):before {\ncontent:"Direcci\xf3n";\n}\n& >  tbody tr td:nth-child(5):before {\ncontent:"Estado";\n}\n& >  tbody tr td:nth-child(4):before {\ncontent:"Total";\n}\n& >tbody tr td:before{\n      margin-right: auto;\n    font-family: "Oswald", sans-serif;\n    font-size: 16px;\n    align-self: center;\n\n}\n\n\n}\n'])),R,(function(e){return e.theme.darckYellow}));function z(e){var n=function(e){var n,t,r=e.setNotification,a=Object(u.g)(),o=Object(u.h)(),i=Object(b.a)(),h=i.token,x=i.setIsLoading,f=Object(p.useState)(new URLSearchParams(o.search)),j=Object(l.a)(f,2),g=j[0],m=(j[1],Object(p.useState)("")),O=Object(l.a)(m,2),v=O[0],w=O[1],y=Object(p.useState)(!1),k=Object(l.a)(y,2),S=k[0],C=k[1],P=Object(p.useState)(1),A=Object(l.a)(P,2),D=A[0],L=A[1],I=Object(p.useState)(1),R=Object(l.a)(I,2),T=R[0],z=R[1],E=Object(p.useState)([]),N=Object(l.a)(E,2),F=N[0],B=N[1],M=Object(p.useState)("all"),H=Object(l.a)(M,2),V=H[0],_=H[1],U=Object(p.useState)("-createdAt"),Y=Object(l.a)(U,2),q=Y[0],J=Y[1],G=Object(p.useState)(!0),$=Object(l.a)(G,2),K=$[0],Q=$[1],W=Object(p.useState)(0),X=Object(l.a)(W,2),Z=X[0],ee=X[1];return K?t=new URLSearchParams(g.toString()):((t=new URLSearchParams).append("sort",q),t.append("page",D),t.append("limit",5)),Object(p.useEffect)((function(){""!==v&&(t.append("orderID",v),_("all")),"all"!==V&&t.append("state",V),L(1)}),[v,V,q]),Object(p.useEffect)((function(){r(0);var e=new AbortController,n=e.signal;return function(){var e=Object(d.a)(s.a.mark((function e(){var r,o,c,i,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,(r=new Headers).append("Accept","application/json"),r.append("Authorization","Bearer ".concat(h)),o={method:"GET",headers:r,signal:n},e.next=8,fetch("/api/orders?".concat(t),o);case 8:return c=e.sent,e.next=11,c.json();case 11:i=e.sent,B(i.data),d=parseInt(i.total),z(Math.ceil(d/5)),a.push("/dashboard/orders?".concat(t)),document.querySelector("body").scrollTo(0,60),Q(!1),C(!1),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log("Fetch Canseled: caught abort"):console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}()(),function(){e.abort()}}),[v,V,D,q,Z]),n={seeDetails:function(e){x(!0),a.push("/dashboard/orders/".concat(e))},handleRefresh:function(){ee(Date.now()),L(1),J("-createdAt"),_("all")},setOrderID:w,setSorting:J,setState:_,setPage:L,page:D,isLoading:S,maxPage:T,orders:F,sorting:q,isFirstRender:K,orderID:v},Object(c.a)(n,"sorting",q),Object(c.a)(n,"state",V),n}({setNotification:e.setNotification}),t=n.seeDetails,a=n.handleRefresh,o=n.setOrderID,i=n.setSorting,w=n.setPage,C=n.setState,P=n.page,A=n.isLoading,z=n.maxPage,E=n.orders,N=n.sorting,F=n.isFirstRender,B=n.orderID,M=n.state;return Object(y.jsxs)(I,{isLoading:A,children:[Object(y.jsx)(h.a,{}),Object(y.jsx)(O.SectionTitle,{children:"Pedidos"}),Object(y.jsx)(f.a,{defaultValue:B,placeholder:"N\xfamero de orden...",setSearch:o}),Object(y.jsxs)(v.FiltersBoard,{children:[Object(y.jsx)(k,{defaultValue:M,setPage:w,setStatePreferece:C}),Object(y.jsx)(S,{defaultValue:N,setSortPreferece:i})]}),Object(y.jsx)(j.RefreshButton,{"data-testid":"refresh-button",onClick:function(){return a()},children:Object(y.jsx)(j.RefreshIcone,{src:x.a,title:"Refrescar P\xe1gina"})}),A?Object(y.jsx)(g.a,{}):null,A&&F&&Object(y.jsx)(L.a,{}),!A&&!F&&0===(null===E||void 0===E?void 0:E.length)&&Object(y.jsx)(m.a,{children:"No se han encontrado coincidencias, intenta de nuevo!!"}),0!==(null===E||void 0===E?void 0:E.length)&&Object(y.jsxs)(T,{children:[Object(y.jsx)(R,{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"N\xba de Pedido"}),Object(y.jsx)("th",{children:"Fecha"}),Object(y.jsx)("th",{children:"Direcci\xf3n"}),Object(y.jsx)("th",{children:"Total"}),Object(y.jsx)("th",{children:"Estado"})]})}),Object(y.jsx)("tbody",{children:null===E||void 0===E?void 0:E.map((function(e){return Object(y.jsxs)("tr",{onClick:function(n){return t(null===e||void 0===e?void 0:e._id)},children:[Object(y.jsx)("td",{children:null===e||void 0===e?void 0:e.orderID}),Object(y.jsxs)("td",{children:[Object(y.jsx)("span",{children:new Date(e.states[0].date).toLocaleString().split(" ")[0]}),Object(y.jsx)("br",{}),Object(y.jsx)("span",{children:new Date(e.states[0].date).toLocaleString().split(" ")[1]})]}),Object(y.jsx)("td",{children:null===e||void 0===e?void 0:e.client[0].address}),Object(y.jsxs)("td",{children:["$",null===e||void 0===e?void 0:e.total]}),Object(y.jsxs)("td",{children:[" ",Object(y.jsx)("b",{children:Object(r.a)(null===e||void 0===e?void 0:e.states).reverse().find((function(e){return!0===e.confirmed})).name})]})]},null===e||void 0===e?void 0:e.orderID)}))})]}),Object(y.jsx)(D.a,{setPage:w,page:P,maxPage:z})]})}},176:function(e,n,t){"use strict";t.r(n);var r=t(3),a=t(2),o=t(55),c=t(163),i=t(6),s=t.n(i),d=t(10),l=t(5),u=t(1),p=t(9),b=t(153);function h(){return(h=Object(d.a)(s.a.mark((function e(n){var t,r,a,o,c,i,d,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.categorySelectId,r=n.info,a=n.setIsRenameFormLoading,o=n.setIsSuccessfullySend,c=n.token,i=n.setAllCategories,a(!0),(d=new Headers).append("Accept","application/json"),d.append("Content-Type","application/json"),d.append("Authorization","Bearer ".concat(c)),l={method:"PUT",headers:d,body:JSON.stringify(r)},e.prev=7,e.next=10,fetch("/api/categories/".concat(t),l);case 10:if(u=e.sent,a(!1),200!==u.status){e.next=18;break}return e.next=15,Object(b.a)(i);case 15:return o(!0),setTimeout((function(){o(!1)}),3e3),e.abrupt("return");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[7,20]])})))).apply(this,arguments)}function x(e){return f.apply(this,arguments)}function f(){return(f=Object(d.a)(s.a.mark((function e(n){var t,r,a,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.categorySelectId,r=n.token,a=n.setAllCategories,(o=new Headers).append("Accept","application/json"),o.append("Authorization","Bearer ".concat(r)),c={method:"DELETE",headers:o},e.prev=5,e.next=8,fetch("/api/categories/"+t,c);case 8:if(204!==(i=e.sent).status){e.next=13;break}return e.next=12,Object(b.a)(a);case 12:return e.abrupt("return");case 13:if(403!==i.status){e.next=15;break}return e.abrupt("return",alert("Se require rol de Administrador"));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})))).apply(this,arguments)}function j(){return(j=Object(d.a)(s.a.mark((function e(n){var t,r,a,o,c,i,d,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.token,r=n.info,a=n.setAllCategories,o=n.setIsCreateFormLoading,c=n.setIsSuccessfullySend,i=n.e,o(!0),e.prev=2,(d=new Headers).append("Accept","application/json"),d.append("Content-Type","application/json"),d.append("Authorization","Bearer ".concat(t)),l={method:"POST",body:JSON.stringify(r),headers:d},e.next=10,fetch("/api/categories",l);case 10:if(u=e.sent,o(!1),201!==u.status){e.next=19;break}return e.next=15,Object(b.a)(a);case 15:return i.target.newCategory.value="",c(!0),setTimeout((function(){c(!1)}),3e3),e.abrupt("return");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})))).apply(this,arguments)}var g=function(e){return j.apply(this,arguments)};function m(){var e=Object(p.a)(),n=e.categories,t=e.setIsSuccessfullySend,r=e.token,a=e.setAllCategories,o=Object(u.useState)("categoria"),c=Object(l.a)(o,2),i=c[0],b=c[1],f=Object(u.useState)(!1),j=Object(l.a)(f,2),m=j[0],O=j[1],v=Object(u.useState)(!1),w=Object(l.a)(v,2),y=w[0],k=w[1],S=Object(u.useState)(""),C=Object(l.a)(S,2),P=C[0],A=C[1];Object(u.useEffect)((function(){var e,t=null===n||void 0===n||null===(e=n.find((function(e){return e.name===i})))||void 0===e?void 0:e._id;A(t)}),[i,n]);var D=function(){var e=Object(d.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopPropagation(),!window.confirm("Al eliminar la categor\xeda se eliminarn todos los productos de la misma, est\xe1 deguro?")){e.next=8;break}return e.next=6,x({categorySelectId:P,token:r,setAllCategories:a});case 6:return b("category"),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{handleRenameSubmit:function(e){e.preventDefault(),e.stopPropagation();var n={categoryNewName:e.target.categoryNewName.value.trim()};!function(e){h.apply(this,arguments)}({categorySelectId:P,info:n,setIsRenameFormLoading:O,setIsSuccessfullySend:t,token:r,setAllCategories:a}),b("category")},handleCreateSubmit:function(e){e.preventDefault(),e.stopPropagation();var n={category:e.target.newCategory.value.trim()};g({token:r,info:n,setAllCategories:a,setIsCreateFormLoading:k,setIsSuccessfullySend:t,e:e})},setEditingCategory:b,editingCategory:i,handleDelete:D,isRenameFormLoading:m,isCreateFormLoading:y,categories:n}}var O,v,w,y,k,S=t(137),C=t(150),P=t(151),A=t(32),D=t(0),L=Object(a.b)(c.Page)(O||(O=Object(r.a)(["\n    background:",";\npadding: 65px 5px;\n    max-height: max-content;\nmin-width:100%;\n"])),(function(e){return e.theme.lightYellow})),I=Object(a.b)(P.o)(v||(v=Object(r.a)(["\nbackground: rgb(0 0 0 / 7%);\n      box-shadow: :",";\n"])),(function(e){return e.theme.inputBoxShadow})),R=a.b.section(w||(w=Object(r.a)(["\nwidth:100%:\nmax-width:1250px;\nmargin:30px auto;\ndisplay:flex;\nflex-wrap:wrap;\njustify-content:center;\ngap:10px;\n&> article{\n  flex: 1 1 400px;\n  width: 100%;\n}\n\n\n"]))),T=a.b.article(y||(y=Object(r.a)(["\n    padding: 20px 15px;\n    margin-bottom: 20px;\n    border-radius: 10px;\n    max-width: 400px;\n        padding: 20px 15px 40px;\n        height:max-content;\n        background:#fff;\n        box-shadow:",";\n& > h4{\n      margin: 10px 0 24px;\n        font-size: 25px;\n}\n& >form  h4{\n      margin: 10px 0 24px;\n        font-size: 25px;\n}\n      \n    & > form select {\n     min-width:95%;\n    }\n    & > form small {\n       position: absolute;\n    margin-top: -18px;\n    margin-left: 10px;\n    }\n\n & > form buttons {\n   transfor:scale(0.8);\n       position: absolute;\n    margin-top: -18px;\n    margin-left: 10px;\n    }\n  @media screen and (max-width: 450px){\n    & > h4{\n     line-height:  24px;\n        font-size: 20px;\n}\n   & > form h4{\n      line-height:  24px;\n        font-size: 20px;\n}\n  \n  }\n\n"])),(function(e){return e.theme.lightBoxShadow})),z=a.b.button(k||(k=Object(r.a)(["\n    padding: 11px 25px 12px;\n    transition: all 0.5s;\n    margin-bottom: 20px;\n    cursor: pointer;\n    text-transform: uppercase;\n    background: ",";\n    border: none;\n    box-shadow: ",';\n    color: white;\n    letter-spacing: 1px;\nfont-size: 15px;\n    font-family: "Oswald",sans-serif;\n    border-radius: 4px;\n    &:hover{\n  background:',";\n    }\n "])),(function(e){return e.theme.black}),(function(e){return e.theme.lightBoxShadow}),(function(e){return e.theme.orange}));n.default=Object(o.a)((function(){var e=m(),n=e.handleRenameSubmit,t=e.handleCreateSubmit,r=e.handleDelete,a=e.setEditingCategory,o=e.editingCategory,c=e.isRenameFormLoading,i=e.isCreateFormLoading,s=e.categories;return Object(D.jsxs)(L,{children:[Object(D.jsx)(C.a,{}),Object(D.jsx)(S.SectionTitle,{light:!0,children:"Categor\xedas"}),Object(D.jsxs)(R,{children:[Object(D.jsxs)(T,{children:[Object(D.jsx)("h4",{children:"Elimeinar categor\xeda"}),Object(D.jsxs)("form",{name:"editCategory",onSubmit:n,children:[Object(D.jsx)(P.h,{name:"category",onChange:function(e){return a(e.target.value)},children:null===s||void 0===s?void 0:s.map((function(e){return Object(D.jsx)(P.g,{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)}))}),Object(D.jsx)(z,{onClick:r,children:"Eliminar"}),Object(D.jsx)("hr",{}),Object(D.jsx)("h4",{children:"Remombrar categor\xeda"}),Object(D.jsx)(I,{placeholder:"Renombrar ".concat(o),name:"categoryNewName"}),c&&Object(D.jsx)(A.a,{small:!0}),Object(D.jsx)(P.f,{as:"input",type:"submit",value:"Editar"})]})]}),Object(D.jsxs)(T,{children:[Object(D.jsx)("h4",{children:"Crear una nueva categor\xeda"}),Object(D.jsxs)("form",{name:"createCategory",onSubmit:t,children:[Object(D.jsx)(I,{placeholder:"Nueva categor\xeda...",name:"newCategory"}),i&&Object(D.jsx)(A.a,{small:!0}),Object(D.jsx)(P.f,{as:"input",type:"submit",value:"Cargar"})]})]})]})]})}))}}]);
//# sourceMappingURL=13.c7fe5c43.chunk.js.map