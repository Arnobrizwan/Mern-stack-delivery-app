{"version":3,"sources":["components/dashboard/DashboardNewProduct.js","API/updateProductAPI.js","img/pencil-edit-form.svg","components/dashboard/EditProductForm.js","hooks/useEditProductForm.js","components/dashboard/DashboardEditProduct.js"],"names":["LinksWrapper","styled","div","withError","to","a","token","formData","id","setIsSuccessfullySend","setFormIsLoading","history","setAllCategories","PUT","response","status","getCategoriesAPI","setTimeout","push","alert","console","log","updateProductAPI","EditIcone","Logo","UpdateNewProductForm","useStorage","productToEdit","categories","useForm","mode","register","handleSubmit","errors","formState","useHistory","useState","formIsLoading","_id","onSubmit","data","e","preventDefault","FormData","img","files","undefined","price","parseInt","append","name","category","size","description","target","state","checked","useEditProductForm","src","editIcone","alt","enctype","defaultValue","isNotRequired","active","LoaderSpinner","small","StyledSection","main"],"mappings":"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","file":"static/js/3.6571d575.chunk.js","sourcesContent":["import styled  from 'styled-components'\r\nimport { withError } from './../withError'\r\nimport CreateNewProductForm from './CreateNewProductForm'\r\nimport {StyledSection} from './DashboardEditProduct'\r\nimport {GoBackLink} from '../product_details/ProductDetails'\r\n\r\n\r\nexport const LinksWrapper =styled.div`\r\ndisplay:flex;\r\nmargin:5px 0;\r\nmargin-left:15px;\r\nwidth:max-content;\r\n`;\r\n function DashboardNewProduct(){\r\n  return(\r\n    <StyledSection>\r\n          <LinksWrapper>\r\n             <GoBackLink to=\"/dashboard/myProducts\" >Regresar </GoBackLink>\r\n          </LinksWrapper>\r\n   \r\n<CreateNewProductForm/>\r\n    </StyledSection>\r\n\r\n  )\r\n}\r\nexport default withError(DashboardNewProduct)","import getCategoriesAPI from \"./getCategoriesAPI\";\r\nimport { PUT } from \"../utils/http\";\r\n\r\nasync function updateProductAPI({\r\n  token,\r\n  formData,\r\n  id,\r\n  setIsSuccessfullySend,\r\n  setFormIsLoading,\r\n  history,\r\n  setAllCategories,\r\n}) {\r\n  try {\r\n    const { response } = await PUT(\r\n      `/api/products/${id}`,\r\n      formData,\r\n      token,\r\n      \"formData\"\r\n    );\r\n    setFormIsLoading(false);\r\n\r\n    if (response.status === 200) {\r\n      await getCategoriesAPI(setAllCategories);\r\n\r\n      setIsSuccessfullySend(true);\r\n      setTimeout(() => {\r\n        setIsSuccessfullySend(false);\r\n        return history.push(\"/dashboard/myProducts\");\r\n      }, 2000);\r\n    }\r\n\r\n    if (response.status === 403)\r\n      return alert(\"Se require rol de Administrador\");\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n\r\nexport default updateProductAPI;\r\n","export default __webpack_public_path__ + \"static/media/pencil-edit-form.1d2432a8.svg\";","import styled from \"styled-components\";\r\nimport useEditProductForm from \"../../hooks/useEditProductForm\";\r\nimport { LoaderSpinner } from \"./../LoaderSpinner\";\r\nimport { Logo } from \"../auth/SignUpForm\";\r\nimport {\r\n  ThisFormCard,\r\n  ThisForm,\r\n  ProductDescriptionTextArea,\r\n  ProductSizeInput,\r\n  ProductPriceInput,\r\n  CategoriesOptionsInput,\r\n  ProductNameInput,\r\n  ImageUploader,\r\n  FormButtons,\r\n  StyledSection,\r\n  FormTitle,\r\n  ProductState,\r\n} from \"./CreateNewProductForm\";\r\nimport editIcone from \"../../img/pencil-edit-form.svg\";\r\n\r\nconst EditIcone = styled(Logo)`\r\n  transform: scale(0.75);\r\n`;\r\n\r\nexport default function UpdateNewProductForm() {\r\n  const {\r\n    categories,\r\n    register,\r\n    handleSubmit,\r\n    errors,\r\n    onSubmit,\r\n    productToEdit,\r\n    formIsLoading,\r\n  } = useEditProductForm();\r\n\r\n  return (\r\n    <StyledSection>\r\n      <ThisFormCard>\r\n        <EditIcone src={editIcone} alt=\"new-product\"></EditIcone>\r\n        <ThisForm\r\n          enctype=\"multipart/form-data\"\r\n          onSubmit={handleSubmit(onSubmit)}\r\n        >\r\n          <FormTitle>Editar {productToEdit?.name}</FormTitle>\r\n\r\n          <ProductNameInput\r\n            register={register}\r\n            errors={errors}\r\n            defaultValue={productToEdit.name}\r\n          />\r\n\r\n          <ProductSizeInput\r\n            register={register}\r\n            errors={errors}\r\n            defaultValue={productToEdit.size}\r\n          />\r\n\r\n          <ProductPriceInput\r\n            register={register}\r\n            errors={errors}\r\n            defaultValue={productToEdit.price}\r\n          />\r\n\r\n          <CategoriesOptionsInput\r\n            register={register}\r\n            errors={errors}\r\n            categories={categories}\r\n            defaultValue={productToEdit.category}\r\n          />\r\n\r\n          <ProductDescriptionTextArea\r\n            defaultValue={productToEdit.description}\r\n            register={register}\r\n            errors={errors}\r\n          />\r\n\r\n          <ImageUploader register={register} errors={errors} isNotRequired />\r\n          <ProductState state={productToEdit?.active ? \"checked\" : false} />\r\n\r\n          {formIsLoading && <LoaderSpinner small />}\r\n\r\n          <FormButtons />\r\n        </ThisForm>\r\n      </ThisFormCard>\r\n    </StyledSection>\r\n  );\r\n}\r\n","import  updateProductAPI from '../API/updateProductAPI'\r\nimport {useForm} from 'react-hook-form'\r\nimport {useStorage} from '../context/useStorage'\r\nimport {  useState,useEffect} from 'react'\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\n\r\nexport default function useEditProductForm(){\r\n\r\n  const {token,productToEdit,setIsSuccessfullySend,setAllCategories,categories} = useStorage()\r\n\r\n        const { register, handleSubmit, formState: { errors } }= useForm({\r\n  mode: \"onBlur\",\r\n});\r\n\r\n   const history = useHistory()\r\n\r\n  const [formIsLoading,setFormIsLoading] = useState(false);\r\n\r\n\r\nlet id= productToEdit._id\r\n\r\n\r\n\r\n\r\n function onSubmit(data,e) {\r\nsetFormIsLoading(true)\r\n  e.preventDefault()\r\n\r\n   const formData = new FormData()\r\n\r\nlet img = data?.img?.files ? data?.img?.files[0] : undefined;\r\nconst  price =parseInt(data.price)\r\n\r\n          formData.append('img',img )\r\n        formData.append('name', data.name)\r\n        formData.append('category', data.category)\r\n        formData.append('size', data.size)\r\n        formData.append('description', data.description)\r\n        formData.append('price', price)\r\n        formData.append('active', e.target.state.checked)\r\n\r\nupdateProductAPI({\r\n    token,\r\n    formData,\r\n    id,\r\nsetIsSuccessfullySend,\r\nsetFormIsLoading,\r\nsetAllCategories,\r\nhistory\r\n})\r\n\r\n  }\r\n\r\nreturn {\r\n  register ,\r\n  handleSubmit,\r\n  errors,\r\n  onSubmit,\r\nformIsLoading,\r\nproductToEdit,\r\ncategories,\r\n}\r\n\r\n}\r\n","import styled  from 'styled-components'\r\nimport { withError } from './../withError'\r\nimport EditProductForm from './EditProductForm'\r\nimport {GoBackLink} from '../product_details/ProductDetails'\r\nimport { LinksWrapper} from './DashboardNewProduct'\r\nexport const StyledSection = styled.main`\r\npadding-top: 60px ;\r\nmargin:0;\r\n min-height:100vh;\r\nwidth:100vw;\r\n`\r\nconst DashboardEditProduct = () =>{\r\n  return(\r\n     <StyledSection>\r\n         <LinksWrapper>\r\n    <GoBackLink to=\"/dashboard/myProducts\" >Regresar</GoBackLink>\r\n          </LinksWrapper>\r\n       <EditProductForm/>\r\n     </StyledSection>\r\n  );\r\n}\r\n\r\nexport default  withError(DashboardEditProduct)"],"sourceRoot":""}