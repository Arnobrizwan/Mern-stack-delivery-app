{"version":3,"sources":["API/updateCategoryNameAPI.js","API/deleteCategoryAPI.js","API/createCategoryAPI.js","hooks/useDashboardCategories.js","components/dashboard/DashboardCategories.js","img/refresh.svg","API/getCategoriesAPI.js","API/deleteOrderAPI.js","components/account/MyOrdersPage.js","hooks/useMyOrdersPage.js","components/FilterOrderStateOptions.js","components/SortOrdersOptions.js","components/dashboard/DashboardOrders.js","hooks/useDashboardOrders.js"],"names":["a","categorySelectId","info","setIsRenameFormLoading","setIsSuccessfullySend","token","setAllCategories","headers","Headers","append","setting","method","body","JSON","stringify","fetch","res","status","getCategoriesAPI","setTimeout","console","log","deleteCategoryAPI","alert","setIsCreateFormLoading","e","target","newCategory","value","createCategoryAPI","useCategoriesForms","useStorage","categories","useState","editingCategory","setEditingCategory","isRenameFormLoading","isCreateFormLoading","setCategorySelectId","useEffect","categoryId","find","category","name","_id","handleDelete","preventDefault","stopPropagation","window","confirm","handleRenameSubmit","categoryNewName","trim","updateCategoryNameAPI","handleCreateSubmit","CategoriesPage","styled","Page","props","theme","lightYellow","Input","TextInput","inputBoxShadow","Wrapper","section","FormCard","article","lightBoxShadow","DeleteButton","button","black","orange","withError","useDashboardCategories","DashboardNav","light","onSubmit","onChange","map","cat","onClick","placeholder","LoaderSpinner","small","as","type","getCategoryAPI","json","data","id","setCurrentUser","currentUserAPI","deleteOrderAPI","main","TableHead","thead","darckYellow","OrdersTable","table","lihgtBoxShadow","CancelOrderButton","disabled","NotFounMessage","div","ButtonPrimary","NotFounIcone","h2","RefreshButton","RefreshIcone","img","MyOrders","currentUser","setIsLoading","history","useHistory","page","setPage","maxPage","setMaxPage","orders","setOrders","userOrders","sort","b","createdAt","Math","ceil","length","splice","deleteOrder","seeDetails","orderID","push","handelRefresh","useMyOrdersPage","src","refreshIcone","title","order","Date","states","date","toLocaleString","split","client","address","total","reverse","state","confirmed","Link","to","PaginationButtons","FilterOrdersStateOptions","setStatePreferece","handelChange","SortOrdersOptions","setSortPreferece","isLoading","NotFaundMessage","FiltersBoard","DashboardOrders","location","useLocation","query","URLSearchParams","setOrderID","setIsLoadingPage","setState","sorting","setSorting","isFirstRender","setIsFirstRender","isRefreshing","setIsRefreshing","controller","AbortController","signal","search","parseInt","document","querySelector","scrollTo","productsAPI","abort","handleRefresh","useDashboardOrders","setSearch","sortPreference"],"mappings":"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","file":"static/js/13.c9dda14f.chunk.js","sourcesContent":["import getCategoriesAPI from './getCategoriesAPI'\r\n\r\n\r\nexport default async function updateCategoryNameAPI({categorySelectId,info,setIsRenameFormLoading,setIsSuccessfullySend,token,setAllCategories}){\r\n\r\nsetIsRenameFormLoading(true)\r\n\r\n   const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\nheaders.append('Content-Type', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n        const setting = {\r\n          method: 'PUT',\r\n          headers: headers,\r\n          body: JSON.stringify(info),\r\n        }\r\n\r\n\r\ntry{\r\n\r\n        let res = await fetch(`/api/categories/${categorySelectId}`, setting);\r\n  \r\n\r\nsetIsRenameFormLoading(false)\r\n\r\n         if(res.status === 200) {\r\n    \r\n\r\n       await getCategoriesAPI(setAllCategories)\r\n\r\n         setIsSuccessfullySend(true);\r\n         setTimeout(() => {\r\n\r\n                  setIsSuccessfullySend(false)\r\n         }, 3000);\r\n\r\n     return\r\n      }\r\n      \r\n\r\n\r\n }catch(err){\r\n\r\n  console.log(err)\r\n}\r\n\r\n\r\n}","\r\nimport getCategoriesAPI from './getCategoriesAPI'\r\n\r\nexport default async function  deleteCategoryAPI({categorySelectId,token,setAllCategories}){\r\n\r\n const headers = new Headers();\r\n           headers.append('Accept', 'application/json');\r\n     headers.append('Authorization', `Bearer ${token}`);\r\n        const setting = {\r\n          method: 'DELETE',\r\n          headers: headers,\r\n\r\n        }\r\n\r\n\r\ntry {\r\n        let res = await fetch(\"/api/categories/\"+categorySelectId, setting);\r\n\r\n     if(res.status  ===204 ){\r\n       await getCategoriesAPI(setAllCategories)\r\n       return\r\n     }\r\nif(res.status === 403) return   alert('Se require rol de Administrador') \r\n\r\n}catch(err){\r\n  console.log(err)\r\n}\r\n\r\n}","import getCategoriesAPI from './getCategoriesAPI'\r\n\r\nasync function createCategoryAPI({token,info,setAllCategories,setIsCreateFormLoading,setIsSuccessfullySend,e}){\r\n\r\n\r\n  setIsCreateFormLoading(true)\r\ntry {\r\n\r\n\r\n  const headers = new Headers();\r\n\r\n headers.append('Accept', 'application/json');\r\nheaders.append('Content-Type', 'application/json');\r\n headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n       \r\n\r\n        const setting = {\r\n          method: 'POST',\r\n            body: JSON.stringify(info),\r\n          headers: headers,\r\n        }\r\n\r\n        let res = await fetch(\"/api/categories\", setting);\r\n\r\n      setIsCreateFormLoading(false)\r\n\r\n      if(res.status === 201) {\r\n\r\n      await getCategoriesAPI(setAllCategories)\r\n      e.target.newCategory.value = \"\"\r\n      setIsSuccessfullySend(true)\r\n      setTimeout(() => {\r\n              setIsSuccessfullySend(false)\r\n      }, 3000);\r\n return\r\n      \r\n      \r\n    }\r\n\r\n\r\n       \r\n}catch(err){\r\n\r\n  console.log(err)\r\n\r\n}\r\n\r\n}\r\nexport default createCategoryAPI","import {useState,useEffect} from 'react'\r\nimport {useStorage} from '../context/useStorage'\r\n import updateCategoryNameAPI from '../API/updateCategoryNameAPI'\r\nimport deleteCategoryAPI  from '../API/deleteCategoryAPI'\r\nimport createCategoryAPI from '../API/createCategoryAPI'\r\n\r\n\r\n \r\nexport default function useCategoriesForms(){\r\n\r\n   const {categories,setIsSuccessfullySend,token,setAllCategories} = useStorage()\r\n\r\n const [editingCategory,setEditingCategory] = useState('categoria')\r\n   const [isRenameFormLoading, setIsRenameFormLoading] = useState(false)\r\n      const [isCreateFormLoading, setIsCreateFormLoading] = useState(false)\r\n\r\n  const [categorySelectId,setCategorySelectId] = useState('')\r\n\r\n\r\nuseEffect(()=>{\r\n\r\nlet categoryId = categories?.find(category => category.name === editingCategory )?._id\r\n\r\nsetCategorySelectId(categoryId)\r\n\r\n},[editingCategory,categories])\r\n\r\n\r\n\r\n\r\nconst handleDelete =async (e) =>{\r\n  e.preventDefault()\r\n e.stopPropagation()\r\n const confirmation =window.confirm('Al eliminar la categoría se eliminarn todos los productos de la misma, está deguro?')\r\n\r\nif(confirmation) {\r\n  await deleteCategoryAPI({categorySelectId,token,setAllCategories})\r\n  setEditingCategory('category')\r\n  return\r\n}\r\n\r\n}\r\n\r\n\r\nconst handleRenameSubmit = (e) =>{\r\n e.preventDefault()\r\n e.stopPropagation()\r\n\r\n   const info ={\r\ncategoryNewName : e.target.categoryNewName.value.trim()\r\n   }\r\n\r\n  updateCategoryNameAPI({categorySelectId,info,setIsRenameFormLoading,setIsSuccessfullySend,token,setAllCategories})\r\nsetEditingCategory('category')\r\n}\r\nconst handleCreateSubmit = (e) =>{\r\ne.preventDefault()\r\n e.stopPropagation()\r\nconst info = {\r\n  category: e.target.newCategory.value.trim()\r\n}\r\ncreateCategoryAPI({token,info,setAllCategories,setIsCreateFormLoading,setIsSuccessfullySend,e})\r\n\r\n}\r\n  return {handleRenameSubmit,handleCreateSubmit,setEditingCategory,editingCategory,\r\nhandleDelete,isRenameFormLoading,isCreateFormLoading,categories} \r\n  \r\n}","import styled  from 'styled-components'\r\nimport { withError } from './../withError'\r\nimport {Page} from './DashboardOrders'\r\nimport useDashboardCategories from '../../hooks/useDashboardCategories'\r\nimport {SectionTitle} from '../menu/Menu'\r\nimport DashboardNav from '../DashboardNav'\r\nimport {TextInput,LoadButton,OptionList,Option} from './CreateNewProductForm'\r\nimport {LoaderSpinner} from './../LoaderSpinner'\r\n\r\n\r\nconst CategoriesPage = styled(Page)`\r\n    background:${props => props.theme.lightYellow};\r\npadding: 65px 15px;\r\n    max-height: max-content;\r\nmin-width:100%;\r\n`\r\n\r\n\r\nconst Input = styled(TextInput)`\r\nbackground: rgb(0 0 0 / 7%);\r\n      box-shadow: :${props => props.theme.inputBoxShadow};\r\n`\r\nconst Wrapper = styled.section`\r\nwidth:100%:\r\nmax-width:1250px;\r\nmargin:30px auto;\r\ndisplay:flex;\r\nflex-wrap:wrap;\r\njustify-content:center;\r\ngap:10px;\r\n&> article{\r\n  flex: 1 1 400px;\r\n  width: 100%;\r\n}\r\n\r\n\r\n`\r\n\r\n\r\n\r\nconst FormCard = styled.article`\r\n    padding: 20px 15px;\r\n    margin-bottom: 20px;\r\n    border-radius: 10px;\r\n    max-width: 400px;\r\n        padding: 20px 15px 40px;\r\n        height:max-content;\r\n        background:#fff;\r\n        box-shadow:${props => props.theme.lightBoxShadow};\r\n& > h4{\r\n      margin: 10px 0 24px;\r\n        font-size: 25px;\r\n}\r\n& >form  h4{\r\n      margin: 10px 0 24px;\r\n        font-size: 25px;\r\n}\r\n      \r\n    & > form select {\r\n     min-width:95%;\r\n    }\r\n    & > form small {\r\n       position: absolute;\r\n    margin-top: -18px;\r\n    margin-left: 10px;\r\n    }\r\n\r\n & > form buttons {\r\n   transfor:scale(0.8);\r\n       position: absolute;\r\n    margin-top: -18px;\r\n    margin-left: 10px;\r\n    }\r\n  @media screen and (max-width: 450px){\r\n    & > h4{\r\n     line-height:  24px;\r\n        font-size: 20px;\r\n}\r\n   & > form h4{\r\n      line-height:  24px;\r\n        font-size: 20px;\r\n}\r\n  \r\n  }\r\n\r\n`\r\nconst DeleteButton = styled.button`\r\n    padding: 11px 25px 12px;\r\n    transition: all 0.5s;\r\n    margin-bottom: 20px;\r\n    cursor: pointer;\r\n    text-transform: uppercase;\r\n    background: ${props => props.theme.black};\r\n    border: none;\r\n    box-shadow: ${props => props.theme.lightBoxShadow};\r\n    color: white;\r\n    letter-spacing: 1px;\r\nfont-size: 15px;\r\n    font-family: \"Oswald\",sans-serif;\r\n    border-radius: 4px;\r\n    &:hover{\r\n  background:${props => props.theme.orange};\r\n    }\r\n `\r\nfunction DashboardCategories(){\r\n\r\n\r\nconst  {handleRenameSubmit,handleCreateSubmit ,handleDelete,setEditingCategory,editingCategory,isRenameFormLoading,isCreateFormLoading,categories}  = useDashboardCategories()\r\n\r\n  return(\r\n    <CategoriesPage>\r\n         <DashboardNav/>\r\n      <SectionTitle light>Categorías</SectionTitle>\r\n\r\n      <Wrapper>\r\n\r\n                <FormCard>\r\n\r\n        <h4>Elimeinar categoría</h4>\r\n\r\n  <form name=\"editCategory\"  onSubmit={handleRenameSubmit}>\r\n\r\n\r\n  <OptionList name=\"category\" onChange={(e) =>setEditingCategory(e.target.value)}>\r\n \r\n  {categories?.map(cat =>\r\n\r\n<Option key={cat?._id } value={cat?.name} >{cat?.name}</Option>\r\n\r\n  )}\r\n\r\n</OptionList>\r\n\r\n                  <DeleteButton onClick={handleDelete}>Eliminar</DeleteButton>\r\n     \r\n<hr></hr>\r\n\r\n\r\n                        <h4>Remombrar categoría</h4>\r\n\r\n  <Input placeholder={`Renombrar ${editingCategory}`} name=\"categoryNewName\"   />\r\n      {isRenameFormLoading  && <LoaderSpinner small />  }\r\n<LoadButton as=\"input\" type=\"submit\" value=\"Editar\"/>\r\n\r\n\r\n</form>\r\n\r\n        </FormCard>\r\n\r\n\r\n\r\n        <FormCard>\r\n          <h4>Crear una nueva categoría</h4>\r\n\r\n<form  name=\"createCategory\"  onSubmit={handleCreateSubmit}>\r\n\r\n  <Input    placeholder=\"Nueva categoría...\"    name=\"newCategory\"      />\r\n\r\n        {isCreateFormLoading  && <LoaderSpinner small />  }\r\n\r\n<LoadButton as=\"input\" type=\"submit\" value=\"Cargar\"/>\r\n\r\n</form>\r\n\r\n        </FormCard>\r\n\r\n      </Wrapper>\r\n    </CategoriesPage>\r\n  )\r\n}\r\nexport default withError(DashboardCategories)","export default __webpack_public_path__ + \"static/media/refresh.f1c42ba5.svg\";","\r\n\r\nexport default async function getCategoryAPI(setAllCategories){\r\n\r\n   const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\n     \r\n\r\n    const setting = {\r\n          method: 'GET',\r\n          headers: headers,\r\n\r\n        }\r\ntry{\r\nlet res =  await fetch('/api/categories',setting)\r\nlet  json= await res.json()\r\n\r\nconst {data} = json\r\n\r\nsetAllCategories(data)\r\n\r\n\r\n}catch(err){\r\n\r\n\r\n  console.log(err)\r\n}\r\n}  \r\n","\r\n\r\nimport currentUserAPI from './currentUserAPI'\r\n\r\nasync function deleteOrderAPI({token,id,setCurrentUser}){\r\n\r\n     const headers = new Headers();\r\n        headers.append('Accept', 'application/json');\r\n     headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n        const setting = {\r\n          method: 'DELETE',\r\n          headers: headers,\r\n\r\n        }\r\n\r\n\r\ntry {\r\n\r\n        let res = await fetch( `/api/orders/${id}`, setting);\r\n\r\n         if(res.status  ===204 ){\r\n\r\n   await currentUserAPI({setCurrentUser,token})\r\n    return \r\n    }\r\n\r\n\r\n      } catch (err) { console.log(err)}\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\nexport default deleteOrderAPI","import styled  from 'styled-components'\r\nimport {Link} from 'react-router-dom'\r\nimport useMyOrdersPage from '../../hooks/useMyOrdersPage'\r\nimport {ButtonPrimary} from '../Buttons'\r\nimport {SectionTitle} from '../menu/Menu'\r\nimport PaginationButtons from '../PaginationButtons'\r\nimport refreshIcone from '../../img/refresh.svg'\r\n\r\n\r\n\r\n\r\nconst Page = styled.main`\r\n    padding: 65px 5px;\r\nmin-height:100vh;\r\nwidth:100%;\r\nmargin: 0 auto;\r\ntext-align:center;\r\nbackground:${props => props.theme.lightYellow};\r\n\r\n`;\r\nexport const TableHead = styled.thead`\r\nbackground-color: ${props => props.theme.black};\r\ncolor: ${props => props.theme.darckYellow};\r\n& > tr th {\r\n   padding: 10px 0;\r\n       font-family: \"Oswald\", sans-serif;\r\n       font-size:19px;\r\n}\r\n`;\r\nexport const OrdersTable = styled.table`\r\n    width: 100%;\r\nmax-width:900px;\r\nmargin: 20px auto 30px;\r\n    border-spacing: 10px;\r\n    border-collapse: collapse;\r\n    border: 2px solid ${props => props.theme.black};\r\n        box-shadow: ${props => props.theme.lihgtBoxShadow};\r\n        text-transform: capitalize;\r\n&> tbody{\r\n  background:#fff;\r\n}\r\n& > tbody td small {\r\n       margin-right: 5px;\r\n}\r\n& >tbody td {\r\n  padding: 10px 0;\r\n  cursor:pointer;\r\n}\r\n& > tbody tr {\r\n      border-bottom: 1px solid;\r\n}\r\n@media screen and (max-width: 750px){\r\n   max-width: 400px;\r\n  & > ${TableHead}{\r\n  display: none;\r\n    max-width: 400px;\r\n}\r\n& tbody tr {\r\ndisplay: flex;\r\n  flex-direction: column;\r\n}\r\n& >  tbody tr td {\r\n      display: flex;\r\n    padding: 5px 15px;\r\n    text-align: right;\r\n}\r\n& >  tbody tr td:first-child {\r\n  color:#fff;\r\n  padding: 10px 15px;\r\nbackground-color: ${props => props.theme.black};\r\n}\r\n& >  tbody tr td:first-child:before {\r\ncontent:\"Nº de Pedido\";\r\n    color: ${props => props.theme.darckYellow};\r\n}\r\n& >  tbody tr td:nth-child(3):before {\r\ncontent:\"Dirección\";\r\n}\r\n& >  tbody tr td:nth-child(2):before {\r\ncontent:\"Fecha\";\r\n}\r\n& >  tbody tr td:nth-child(5):before {\r\ncontent:\"Estado\";\r\n}\r\n& >  tbody tr td:nth-child(4):before {\r\ncontent:\"Total\";\r\n}\r\n& >  tbody tr td:nth-child(6):before {\r\ncontent:\"Acciones\";\r\n}\r\n& >tbody tr td:before{\r\n      margin-right: auto;\r\n    font-family: \"Oswald\", sans-serif;\r\n    font-size: 16px;\r\n    align-self: center;\r\npadding-rigth:5px;\r\n}\r\n}\r\n`\r\n\r\nconst CancelOrderButton = styled.button`\r\npadding:  8px 5px;\r\ncursor:pointer;\r\noutline:none;\r\nmargin: 5px ;\r\n    border-radius: 10px 5px;\r\nborder: none;\r\nfont-family: \"Oswald\", sans-serif;\r\ntransition:all 0.5s ;\r\nopacity:${((props) => (props.disabled ? \"0.4\" : \"1\"))};\r\n&:hover {\r\nbackground:${((props) => (props.disabled ? \"unset\" : \"#cdc8c8\"))};\r\n}\r\n`\r\nconst NotFounMessage = styled.div`\r\npadding: 30px 0;\r\n& >h3{\r\nmargin-bottom:40px;\r\n}\r\n@media screen and (max-width:450px){\r\n  font-size: 25px;\r\n}\r\n& > ${ButtonPrimary} {\r\n      padding: 15px 30px;\r\n}\r\n`;\r\nconst NotFounIcone = styled.h2`\r\nfont-size:50px;\r\n`;\r\nexport const RefreshButton = styled.div` \r\ncursor:pointer;\r\npadding:0 10px;\r\nalign-items: center;\r\n    border-radius: 5px;\r\n    height: 40px;\r\n      box-shadow: ${props => props.theme.lihgtBoxShadow};\r\n    background:${props => props.theme.black};\r\n\r\n    margin: -46px 0 10px auto;\r\n    width: max-content;\r\ndisplay: flex;\r\n    transform: scale(0.7);\r\n    transition: all 0.3s ease;\r\n&:hover{\r\n  transform:scale(0.75);\r\n}\r\n`\r\n\r\n\r\nexport const RefreshIcone = styled.img`\r\nheight: 50%;\r\ncursor:pointer;\r\n`;\r\n\r\n\r\nexport default function MyOrders(){\r\n\r\n\r\n\r\nconst {page,setPage,maxPage,orders,deleteOrder,seeDetails,handelRefresh} = useMyOrdersPage()\r\n\r\n  return(\r\n<Page>\r\n\r\n  <SectionTitle light>Mis Pedidos</SectionTitle>\r\n  \r\n<RefreshButton onClick={handelRefresh}>\r\n  <RefreshIcone   src={refreshIcone} title='Refrescar Página'/>\r\n  </RefreshButton>\r\n\r\n  { (orders?.length > 0 )?\r\n<OrdersTable>\r\n  <TableHead>\r\n    <tr>\r\n    <th>Nº de Pedido</th>\r\n         <th>Fecha</th>\r\n        <th>Dirección</th>\r\n            <th>Total</th>\r\n            <th>Estado</th>\r\n            <th >Acciones</th>\r\n            </tr>\r\n  </TableHead>\r\n  <tbody>\r\n    {orders?.map(order => \r\n\r\n    <tr key={order?._id} onClick={(e) => seeDetails(order?.orderID)}>\r\n    <td>{order?.orderID}</td>\r\n        <td>\r\n  \r\n          <small>{new Date(order?.states[0].date).toLocaleString()?.split(\" \")[0]}</small>\r\n          <br></br>\r\n            <small>{new Date(order?.states[0].date).toLocaleString()?.split(\" \")[1]}</small>\r\n</td>\r\n        <td>{order.client[0].address}</td>\r\n        <td>${order?.total}</td>\r\n        <td> <b>{[...order?.states].reverse().find(state => state.confirmed ===true).name}</b></td>\r\n\r\n         <td  >\r\n                    <CancelOrderButton disabled={(order?.states[1].confirmed === true) ? true : false} onClick={ (e) => deleteOrder(e,order._id)}>\r\nCancelar Pedido\r\n                    </CancelOrderButton>\r\n           </td>\r\n        </tr>\r\n\r\n    )}\r\n\r\n  </tbody>\r\n \r\n</OrdersTable> \r\n:\r\n<NotFounMessage>\r\n        <NotFounIcone >👩🏻&zwj;🍳</NotFounIcone>\r\n        <h3>Ningún pedido realizado, tienes hambre?</h3>\r\n\r\n      <ButtonPrimary small as={Link} to=\"/menu\">Ver Menú</ButtonPrimary>\r\n    </NotFounMessage>\r\n\r\n}\r\n\r\n<PaginationButtons setPage={setPage} page={page} maxPage={maxPage} />\r\n</Page>\r\n  )\r\n}","import {useHistory} from 'react-router-dom'\r\nimport {  useState,useEffect} from 'react'\r\nimport {useStorage} from '../context/useStorage'\r\nimport deleteOrderAPI from '../API/deleteOrderAPI'\r\nimport currentUserAPI from '../API/currentUserAPI'\r\n\r\n\r\n\r\nexport default function useMyOrdersPage(){\r\n\r\n    const {currentUser,token,setCurrentUser,setIsLoading}= useStorage()\r\n    \r\n  const history = useHistory()\r\n\r\n    let limit = 5\r\n    const [page, setPage] = useState(1)\r\n    const [maxPage, setMaxPage] = useState(1)\r\n     const [orders,setOrders] = useState([])\r\n\r\nlet userOrders =[...currentUser?.orders].sort((a, b)=>{\r\n    return    b.createdAt -a.createdAt\r\n});\r\nuseEffect(() => {\r\nsetMaxPage(Math.ceil(userOrders.length/limit))\r\n\r\n setOrders(userOrders.splice( (page-1)*limit  , ((page-1)*limit)+limit))\r\n\r\n},[page,limit,currentUser])\r\n\r\n\r\nconst deleteOrder = (e,id) =>{\r\n e.stopPropagation();\r\nif (!e.target.disabled ) return deleteOrderAPI({token,id,setCurrentUser})\r\n}\r\nconst seeDetails = (orderID) =>{\r\n return history.push(`/myAccount/myOrders/${orderID}` )\r\n}\r\n\r\nconst handelRefresh = () =>{\r\n  setIsLoading(true)\r\n  currentUserAPI({token,setCurrentUser})\r\n\r\n}\r\nuseEffect(()=>{\r\n setIsLoading(false)\r\n},[currentUser])\r\n\r\nreturn {page,setPage,maxPage,orders,deleteOrder,seeDetails,handelRefresh}\r\n}","\r\nimport {Option,OptionList} from './SortProductsOptions'\r\n\r\nexport default function FilterOrdersStateOptions({setStatePreferece,setPage}){\r\n\r\n  const handelChange = (e) =>{\r\n e.preventDefault()\r\n     setPage(1)\r\n setStatePreferece(e.target.value)\r\n}\r\n\r\nreturn(\r\n<OptionList name=\"filterOrdersByState\" onChange={(e) =>handelChange(e)}>\r\n<Option value=\"all\" >Todos</Option>\r\n<Option value=\"finish\" >Liquidados</Option>\r\n<Option value=\"unfinish\" >Pendientes</Option>\r\n</OptionList>\r\n\r\n);\r\n\r\n} ","\r\nimport {Option,OptionList} from './SortProductsOptions'\r\n\r\nexport default function SortOrdersOptions({setSortPreferece}){\r\n\r\n\r\nreturn(\r\n<OptionList name=\"sortProductBy\" onChange={(e) => setSortPreferece(e.target.value)}>\r\n<Option value=\"-createdAt\" >Más recientes</Option>\r\n<Option value=\"createdAt\" >Más antiguos</Option>\r\n<Option value=\"total\" >Menor Monto</Option>\r\n<Option value=\"-total\">Mayor Monto</Option>\r\n\r\n</OptionList>\r\n\r\n);\r\n\r\n} ","import styled  from 'styled-components'\r\nimport useDashboardOrders from '../../hooks/useDashboardOrders'\r\nimport DashboardNav from '../DashboardNav'\r\nimport refreshIcone from '../../img/refresh.svg'\r\nimport SearchBar from '../MenuSearchBar'\r\nimport {RefreshButton,RefreshIcone} from '../account/MyOrdersPage'\r\nimport {LoaderSpinner} from './../LoaderSpinner'\r\nimport {NotFaundMessage} from '../menu/ProductsSection'\r\nimport {SectionTitle} from '../menu/Menu'\r\nimport {FiltersBoard} from './DashboardProducts'\r\nimport FilterOrderStateOptions from './../FilterOrderStateOptions'\r\nimport SortOrdersOptions from './../SortOrdersOptions'\r\nimport PaginationButtons from '../PaginationButtons'\r\n\r\nexport const Page = styled.section`\r\n    padding: 60px 05px;\r\nmin-height:100vh;\r\nwidth:100%;\r\nmax-width: 1250px;\r\nmargin: 0 auto;\r\ntext-align:center;\r\n  &:before{\r\n    display: ${props => props.isLoading ? 'block' : 'none'};\r\n      position:absolute;\r\n      content:\" \";\r\n      top:0;\r\n      left:0;\r\n    right:0;\r\n    bottom:0;\r\n    background:#ffffff57;\r\n    z-index:400;\r\n    }\r\n       & >${LoaderSpinner} {\r\n  position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    z-index: 500;\r\n    margin: -60px 0  0 -60px ;\r\n \r\n}\r\n& > ${NotFaundMessage} {\r\n  padding: 0 5px;\r\n}\r\n& > ${FiltersBoard} {\r\n margin: 30px 5px 0;\r\n}\r\n\r\n`;\r\nexport const TableHead = styled.thead`\r\nbackground-color: #171717;\r\ncolor: #fcba1c;\r\n& >tr th {\r\n   padding: 10px 0;\r\n       font-family: \"Oswald\", sans-serif;\r\n       font-size:19px;\r\n}\r\n`;\r\nexport const OrdersTable = styled.table`\r\n    width: 100%;\r\nmax-width:900px;\r\nmargin: 20px auto 40px;\r\n    border-spacing: 10px;\r\n    border-collapse: collapse;\r\n    border: 2px solid #171717;\r\n        text-transform: capitalize;\r\n\r\n&> tbody{\r\n  background:#fff;\r\n}\r\n\r\n& >tbody tr td {\r\n  padding: 10px 0;\r\n  cursor:pointer;\r\n\r\n}\r\n& >tbody tr {\r\n \r\n  border-bottom: 1px solid ;\r\n}\r\n& >tbody tr td small {\r\n  margin-left:   5px ;\r\n\r\n}\r\n@media screen and (max-width: 750px){\r\n\r\n    max-width: 400px;\r\n\r\n  & > ${TableHead}{\r\n  display: none;\r\n  max-width: 400px;\r\n}\r\n& tbody tr {\r\ndisplay: flex;\r\n  flex-direction: column;\r\n}\r\n& >  tbody tr td {\r\n      display: flex;\r\n    padding: 5px 15px;\r\n    text-align: right;\r\n}\r\n& >  tbody tr td:first-child {\r\n  color:#fff;\r\n  padding: 10px 15px;\r\nbackground-color: #171717;\r\n}\r\n& >  tbody tr td:first-child:before {\r\ncontent:\"Nº de Pedido\";\r\n    color: #fcba1c;\r\n}\r\n& >  tbody tr td:nth-child(2):before {\r\ncontent:\"Dirección\";\r\n}\r\n& >  tbody tr td:nth-child(3):before {\r\ncontent:\"Fecha\";\r\n}\r\n& >  tbody tr td:nth-child(5):before {\r\ncontent:\"Estado\";\r\n}\r\n& >  tbody tr td:nth-child(4):before {\r\ncontent:\"Total\";\r\n}\r\n& >tbody tr td:before{\r\n      margin-right: auto;\r\n    font-family: \"Oswald\", sans-serif;\r\n    font-size: 16px;\r\n    align-self: center;\r\n\r\n}\r\n\r\n\r\n}\r\n`\r\nexport default function DashboardOrders(){\r\n \r\n\r\n\r\n\r\nconst {seeDetails,handleRefresh,setOrderID,setSorting,setPage,setState,page,isLoading,maxPage,orders,sorting,isFirstRender} = useDashboardOrders()\r\n\r\n\r\n  return(\r\n<Page  isLoading={isLoading}>\r\n     <DashboardNav/>\r\n     <SectionTitle>Pedidos</SectionTitle>\r\n   \r\n<SearchBar placeholder='Número de orden...' setSearch={setOrderID} />\r\n<FiltersBoard>\r\n          <FilterOrderStateOptions setPage={setPage} setStatePreferece={setState}/>\r\n          <SortOrdersOptions setSortPreferece={setSorting} sortPreference={sorting} />\r\n        </FiltersBoard>\r\n  <RefreshButton onClick={(e) =>handleRefresh()}>\r\n  <RefreshIcone src={refreshIcone} title='Refrescar Página'/>\r\n  </RefreshButton>\r\n  {isLoading ? <LoaderSpinner /> :  null }\r\n  {   ( (!isLoading) && (!isFirstRender)  &&  orders?.length === 0) ?\r\n  \r\n  <NotFaundMessage>No se han encontrado coincidencias, intenta de nuevo!!</NotFaundMessage>\r\n\r\n  :\r\n\r\n<OrdersTable>\r\n  <TableHead>\r\n    <tr>\r\n    <th>Nº de Pedido</th>\r\n         <th>Fecha</th>\r\n        <th>Dirección</th>\r\n            <th>Total</th>\r\n            <th>Estado</th>\r\n    </tr>\r\n  </TableHead>\r\n  <tbody>\r\n{orders?.map(order => \r\n    <tr key={order?.orderID}   onClick={ (e) => seeDetails(order?._id)}>\r\n    <td>{order?.orderID}</td>\r\n        <td>\r\n          <small>{new Date(order.states[0].date).toLocaleString().split(\" \")[0]}</small>\r\n              <br></br>\r\n            <small>{new Date(order.states[0].date).toLocaleString().split(\" \")[1]}</small>\r\n</td>\r\n        <td>{order?.client[0].address}</td>\r\n        <td>${order?.total}</td>\r\n        <td> <b>{[...order?.states].reverse().find(state => state.confirmed ===true).name}</b></td>\r\n\r\n</tr>\r\n  \r\n  \r\n  )}\r\n      \r\n  </tbody>\r\n \r\n</OrdersTable> }\r\n\r\n\r\n<PaginationButtons setPage={setPage} page={page} maxPage={maxPage} />\r\n\r\n</Page>\r\n  )\r\n}","import {useHistory,useLocation} from 'react-router-dom'\r\n\r\nimport {useState, useEffect } from 'react'\r\nimport {useStorage} from '../context/useStorage'\r\n\r\n\r\nexport default function useDashboardOrders(){\r\nconst history = useHistory()\r\nconst location = useLocation()\r\n\r\n  \r\nconst {token,setIsLoading} = useStorage()\r\n\r\n\r\nconst seeDetails = (orderID) =>{\r\n      setIsLoading(true)\r\n history.push(`/dashboard/orders/${orderID}` )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  let query = new URLSearchParams();\r\n\r\n    let sizeLimit = 5\r\n\r\n\r\n\r\n  const [orderID, setOrderID] = useState(\"\")\r\n  const[isLoading,setIsLoadingPage] = useState(false)\r\n    const [page, setPage] = useState(1)\r\n    const [maxPage, setMaxPage] = useState(1)\r\n    const [orders, setOrders] = useState([])\r\n    const [state,setState] =useState('all')\r\n  const [sorting, setSorting] = useState(\"-createdAt\")\r\nconst [isFirstRender, setIsFirstRender] = useState(true)\r\nconst [isRefreshing, setIsRefreshing] = useState(false)\r\n   query.append('page',page)\r\n   query.append('limit',sizeLimit)\r\n   query.append('sort',sorting)\r\n\r\n  \r\nuseEffect(() => {\r\n\r\nif(orderID !==\"\"){ \r\n\r\nquery.append('orderID',orderID)\r\n\r\nsetPage(1)\r\nsetState('all')\r\n     \r\n    }\r\n  \r\n},[orderID])\r\n\r\nuseEffect(() => {\r\n\r\nif(state !==\"all\"){\r\nquery.append('state',state)\r\n    }\r\n  \r\n},[state])\r\n\r\nuseEffect(() => {\r\n  \r\n  const controller = new AbortController()\r\n const signal = controller.signal\r\n\r\n  if( isFirstRender && location.search !==\"\"){\r\n\r\n     query=location.search.split('?')[1]\r\n      \r\n\r\n      }\r\n\r\nconst productsAPI = async () =>{\r\n    setIsLoadingPage(true)\r\n\r\n  try{\r\n\r\n\r\n       const headers = new Headers();\r\n      headers.append('Accept', 'application/json');\r\n      headers.append('Authorization', `Bearer ${token}`);\r\n\r\n\r\n    const setting = {\r\n          method: 'GET',\r\n          headers: headers,\r\nsignal,\r\n        }\r\n\r\n     let res = await fetch(`/api/orders?${query}`,setting)\r\n     let json = await res.json()\r\n\r\n    setOrders(json.data)\r\n\r\n    let total = parseInt(json.total)\r\n\r\n     setMaxPage(Math.ceil(total/sizeLimit))\r\n\r\n  history.push(`/dashboard/orders?${query}`)\r\n\r\ndocument.querySelector('body').scrollTo(0,100)\r\n        setIsFirstRender(false)\r\n     setIsLoadingPage(false)\r\n \r\n  }catch(err){\r\n    if(err.name === 'AbortError'){\r\n   console.log('Fetch Canseled: caught abort')\r\n }else{\r\n\r\n     console.log(err)\r\n\r\n  }\r\n}\r\n  }\r\n\r\n  productsAPI()\r\n     return () =>{\r\n     controller.abort()\r\n   }   \r\n }, [orderID,state,page,sorting])\r\n\r\n\r\n const handleRefresh = () =>{\r\n  setIsRefreshing(!isRefreshing)\r\n}\r\n\r\n\r\nreturn {seeDetails,handleRefresh,setOrderID,setSorting,setState,setPage,page,isLoading,maxPage,orders,sorting,isFirstRender}\r\n\r\n\r\n}"],"sourceRoot":""}