(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[17],{152:function(e,r,t){"use strict";var s=t(6),n=t.n(s),a=t(10);function o(){return(o=Object(a.a)(n.a.mark((function e(r){var t,s,a,o,c,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.token,s=r.setAllUsers,(a=new Headers).append("Accept","application/json"),a.append("Authorization","Bearer ".concat(t)),o={method:"GET",headers:a},e.prev=5,e.next=8,fetch("/api/users",o);case 8:return c=e.sent,e.next=11,c.json();case 11:u=e.sent,200===c.status&&s(u),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}r.a=function(e){return o.apply(this,arguments)}},156:function(e,r,t){"use strict";var s=t(6),n=t.n(s),a=t(10);function o(){return(o=Object(a.a)(n.a.mark((function e(r){var t,s,a,o,c,u,l,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.setCurrentUser,s=r.token,a=localStorage.getItem("userId"),(o=new Headers).append("Accept","application/json"),o.append("Authorization","Bearer ".concat(s)),c={method:"GET",headers:o},e.prev=6,e.next=9,fetch("/api/users/me/".concat(a),c);case 9:return u=e.sent,e.next=12,u.json();case 12:l=e.sent,i=l.data,t(i),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}r.a=function(e){return o.apply(this,arguments)}},178:function(e,r,t){"use strict";t.r(r);var s=t(3),n=t(2),a=t(55),o=t(1),c=t(6),u=t.n(c),l=t(10),i=t(5),d=t(134),p=t(7),b=t(9),m=t(156),j=t(152);function h(){return(h=Object(l.a)(u.a.mark((function e(r){var t,s,n,a,o,c,l,i,d,p,b,h,f,g,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.setFormIsLoading,s=r.setIsSuccessfullySend,n=r.setServerError,a=r.info,o=r.isAdmin,c=r.setAllUsers,l=r.token,i=r.setCurrentUser,d=r.history,e.prev=1,t(!0),n(""),p=localStorage.getItem("userId"),(b=new Headers).append("Accept","application/json"),b.append("Content-Type","application/json"),b.append("Authorization","Bearer ".concat(l)),h={method:"PUT",headers:b,body:JSON.stringify(a)},e.next=12,fetch("/api/users/me/".concat(p),h);case 12:return f=e.sent,e.next=15,f.json();case 15:if(g=e.sent,t(!1),200!==f.status){e.next=27;break}if(e.t0=o,!e.t0){e.next=22;break}return e.next=22,Object(j.a)({token:l,setAllUsers:c});case 22:return e.next=24,Object(m.a)({token:l,setCurrentUser:i});case 24:return s(!0),setTimeout((function(){s(!1),d.push("/myAccount/myProfile")}),3e3),e.abrupt("return");case 27:x=g.message,console.log(x),n(x),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(1),console.log(e.t1);case 35:case"end":return e.stop()}}),e,null,[[1,32]])})))).apply(this,arguments)}var f=function(e){return h.apply(this,arguments)};var g,x,v,O,w,S=t(32),y=t(138),C=t(142),A=t(151),k=t(24),N=t.p+"static/media/user-edit-solid.3b6cccdd.svg",I=t(0),P=n.b.section(g||(g=Object(s.a)(["\n    min-height:100vh;\nwidth:100vw;\npadding: 60px 0px;\n\n"]))),V=n.b.form(x||(x=Object(s.a)(["\n\n  max-width:400px;\n  width:100%;\n      padding: 10px 25px 40px;\n    border-radius: 10px;\n    background: #fff;\nmargin: 50px auto;\ndisplay:flex;\nflex-flow:column;\nalign-items:center;\n& > input {\n  border:none;\n  background: #f0f0f0;\n}\n&> label {\n  margin: 0 auto 20px\n}\n&> small {\nmargin: -10px auto 4px 0;\n}\n& >"," {\n  min-width: 100%\n}\n\n& > input:focus {\n  outline: 2px solid #ccc;\n    outline-style: auto;\n}\n  "])),A.h),L=n.b.div(v||(v=Object(s.a)(["\n  margin-top:-15px;\n  & > label{\nfont-size:16px;\n  }\n\n  "]))),U=n.b.img(O||(O=Object(s.a)(["\nwidth:120px;\nmargin: 0 auto;\nmargin-bottom:20px;\nmargin-top:-20px;\n"]))),E=Object(n.b)(k.a)(w||(w=Object(s.a)(['\nmargin-left: 15px;\n&:before{\n      content: "<-- ";\n    margin-right: 3px;\n}\n'])));function T(e){var r=e.setIsChangingPassword,t=e.value;return Object(I.jsxs)(A.b,{children:[Object(I.jsx)("label",{htmlFor:"newPasswordCheckbox",children:"Cambiar contrase\xf1a:"}),Object(I.jsx)("input",{onChange:function(e){r(!t)},id:"newPasswordCheckbox",type:"checkbox",name:"newPasswordCheckbox"})]})}function q(e){var r=e.register,t=e.errors,s=e.placeholder,n=e.defaultValue;return Object(I.jsxs)(o.Fragment,{children:[t.userNumber&&Object(I.jsx)(y.a,{role:"alert",children:t.userNumber.message}),Object(I.jsx)(y.b,{placeholder:s,name:"userNumber",type:"text",defaultValue:n||"",ref:r({required:"*El campo es requrido",minLength:{value:9,message:"*Tel\xe9fono Invalido"},maxLength:{value:10,message:"*Tel\xe9fono Invalido"},pattern:{value:/[0-9]/,message:"*Solo se aceptan n\xfameros"}}),style:{borderColor:t.userNumber&&"#bf0000"}})]})}function F(e){var r=e.register,t=e.defaultValue;return Object(I.jsxs)(A.h,{name:"userCityAddress",ref:r({required:"*El campo es requrido"}),children:[Object(I.jsx)(A.g,{value:"C\xf3rdoba",selected:"c\xf3rdoba"===t,children:"C\xf3rdoba"}),Object(I.jsx)(A.g,{value:"Buenos Aires",selected:"buenos aires"===t,children:"Buenos Aires"})]})}function B(e){var r=e.errors,t=e.placeholder,s=e.register,n=e.defaultValue;return Object(I.jsxs)(o.Fragment,{children:[r.userStreetAddress&&Object(I.jsx)(y.a,{role:"alert",children:r.userStreetAddress.message}),Object(I.jsx)(y.b,{placeholder:t,name:"userStreetAddress",defaultValue:n||"",ref:s({required:"*El campo es requrido"}),style:{borderColor:r.userStreetAddress&&"#bf0000"}})]})}function z(e){var r=e.errors,t=e.placeholder,s=e.register,n=e.defaultValue;return Object(I.jsxs)(o.Fragment,{children:[r.userStreetNumber&&Object(I.jsx)(y.a,{role:"alert",children:r.userStreetNumber.message}),Object(I.jsx)(y.b,{placeholder:t,name:"userStreetNumber",defaultValue:n||"",ref:s({required:"*El campo es requrido",maxLength:{value:4,message:"*N\xfamero Invalido"},pattern:{value:/[0-9]/,message:"*Solo se aceptan n\xfameros"}}),style:{borderColor:r.userStreetNumber&&"#bf0000"}})]})}r.default=Object(a.a)((function(){var e=function(){var e=Object(b.a)(),r=e.token,t=e.setCurrentUser,s=e.setAllUsers,n=e.isAdmin,a=e.setIsSuccessfullySend,c=e.currentUser,m=Object(o.useState)(""),j=Object(i.a)(m,2),h=j[0],g=j[1],x=Object(o.useState)(!1),v=Object(i.a)(x,2),O=v[0],w=v[1],S=Object(o.useState)(!1),y=Object(i.a)(S,2),C=y[0],A=y[1],k={name:c.name.split(" ")[0],lastName:c.name.split(" ")[1],street:c.address.split(",")[0].split(" ").slice(0,-1).join(" "),streetNumber:c.address.split(",")[0].split(" ").splice(-1),number:c.number,city:c.address.split(",")[1].trim()},N=Object(p.g)(),I=Object(d.a)({mode:"onBlur"});function P(){return(P=Object(l.a)(u.a.mark((function e(t,o){var c,l,i,d,p,b,m,j,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),p=null===(c=t.userName)||void 0===c?void 0:c.toLowerCase(),b=null===(l=t.userLastName)||void 0===l?void 0:l.toLowerCase(),m=null===(i=t.userCityAddress)||void 0===i?void 0:i.toLowerCase(),j=null===(d=t.userStreetAddress)||void 0===d?void 0:d.toLowerCase(),h={name:p,lastName:b,password:t.userPassword||null,newPassword:t.userNewPassword||null,number:t.userNumber,city:m,street:j,streetNumber:t.userStreetNumber},e.next=5,f({setFormIsLoading:A,setIsSuccessfullySend:a,setServerError:g,info:h,isAdmin:n,setAllUsers:s,token:r,history:N});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{register:I.register,handleSubmit:I.handleSubmit,errors:I.formState.errors,onSubmit:function(e,r){return P.apply(this,arguments)},serverError:h,setCurrentUser:t,formIsLoading:C,defaultsValues:k,isChangingPassword:O,setIsChangingPassword:w}}(),r=e.register,t=e.handleSubmit,s=e.errors,n=e.onSubmit,a=e.serverError,c=e.formIsLoading,m=e.isChangingPassword,j=e.setIsChangingPassword,h=e.defaultsValues;return Object(I.jsxs)(P,{children:[Object(I.jsx)(E,{to:"/myAccount/myProfile",children:"Regresar"}),Object(I.jsxs)(V,{onSubmit:t(n),novalidate:!0,children:[Object(I.jsx)(U,{src:N,alt:"edit-profile"}),Object(I.jsx)(C.h,{errors:s,register:r,defaultValue:h.name}),Object(I.jsx)(C.g,{errors:s,register:r,defaultValue:h.lastName}),Object(I.jsx)(q,{defaultValue:h.number,errors:s,register:r,placeholder:"Tu tel\xe8fono..."}),Object(I.jsx)(F,{register:r,defaultValue:h.city}),Object(I.jsx)(B,{errors:s,register:r,placeholder:"Calle...",defaultValue:h.street}),Object(I.jsx)(z,{errors:s,register:r,placeholder:"N\xfamero de puerta...",defaultValue:h.streetNumber}),Object(I.jsx)(L,{children:Object(I.jsx)(T,{setIsChangingPassword:j,value:m})}),m?Object(I.jsxs)(o.Fragment,{children:[Object(I.jsx)(C.j,{errors:s,register:r,name:"userPassword",placeholder:"Tu contrase\xf1a..."}),Object(I.jsx)(C.i,{errors:s,register:r,name:"newPassword",placeholder:"Nueva contrase\xf1a..."})]}):null,c?Object(I.jsx)(S.a,{small:!0}):Object(I.jsx)(C.a,{children:a}),Object(I.jsx)(A.c,{small:!0})]})]})}))}}]);
//# sourceMappingURL=17.597dceb6.chunk.js.map