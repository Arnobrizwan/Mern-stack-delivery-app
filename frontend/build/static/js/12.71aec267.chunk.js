(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[12,21],{66:function(n,e,t){"use strict";t.d(e,"a",(function(){return a})),t.d(e,"b",(function(){return d}));var r,o,i=t(3),c=t(2),a=c.b.a(r||(r=Object(i.a)(["\n     box-shadow: ",";\npadding: 15px 40px;\ncolor:#fff;\nwidth:max-content;\n  background:",';\n  text-transform: uppercase;\n  text-align:center;\n  font-size: 16px;\n  font-family: "Oswald", sans-serif;\n  font-weight:600px;\n line-height:23.5px;\n  cursor:pointer;\n  letter-spacing:2px;\n  border-radius:4px;\n    text-decoration: none;\n\n    transform:\'',"';\n  transition:all 0.5s ease;\n  &:hover{\n    background-color:",";\n  }\n  & > * {\n    cursor:pointer;\n  }\n    @media screen and (max-width: 550px){\n   transform:scale(0.8);\n"])),(function(n){return n.theme.lightBoxShadow}),(function(n){return n.theme.darckYellow}),(function(n){return n.small?"scale(0.7)":"scale(1)"}),(function(n){return n.theme.black})),d=Object(c.b)(a)(o||(o=Object(i.a)(["\n  background:",";\n"])),(function(n){return n.theme.orange}))},68:function(n,e,t){"use strict";t.d(e,"a",(function(){return b})),t.d(e,"b",(function(){return h})),t.d(e,"c",(function(){return f}));var r=t(3),o=t(2),i=t(16),c=t(1),a=t(11);var d,s,l=t.p+"static/media/shopping-cart-solid.f0d47d21.svg",u=t(0),b=o.b.button(d||(d=Object(r.a)(["\nposition:relative;\nmargin-left:auto;\nmargin-top:auto;\nbox-shadow: ",";\npadding:20px 0;\nwidth:50px;\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nbackground: ","  ;\noutline:none;\nborder:none;\nborder-radius: 4px;\nfont-weight:600;\ncursor:pointer;\nfont-size:20px;\ncolor:#fff;\ntransition: all 0.3s ease;\n&:hover{\n  background:",";\n}"])),(function(n){return n.theme.lightBoxShadow}),(function(n){return n.isAdded?n.theme.darckYellow:n.theme.black}),(function(n){return n.theme.darckYellow})),h=o.b.img(s||(s=Object(r.a)(["\nwidth:20px;\nheight:20px;\ntransition: all 05s ease;\n\n"])));function f(n){var e=n.thisProductInfo,t=function(n){var e=Object(a.a)(),t=e.cartProducts,r=e.addToCart,o=e.addToTotalCost,d=Object(c.useState)(!1),s=Object(i.a)(d,2),l=s[0],u=s[1],b=t.map((function(n){return n.info._id}));return Object(c.useEffect)((function(){-1!==b.indexOf(n._id)?u(!0):u(!1)}),[b,n]),{handlerAddToCartAndAddToTotalCost:function(n,e){if(-1===b.indexOf(n._id))return o(e),void r({info:n,quantity:1})},isAdded:l}}(e),r=t.handlerAddToCartAndAddToTotalCost,o=t.isAdded;return Object(u.jsx)(b,{isAdded:o,onClick:function(){return r(e,parseInt(null===e||void 0===e?void 0:e.price))},children:Object(u.jsx)(h,{style:{position:"absolute"},src:l,alt:"add-to-cart"})})}},69:function(n,e,t){"use strict";e.a=t.p+"static/media/default-image.02bd9b08.png"},80:function(n,e,t){"use strict";e.a=t.p+"static/media/refresh.f1c42ba5.svg"},86:function(n,e,t){"use strict";t.r(e),t.d(e,"TableHead",(function(){return D})),t.d(e,"OrdersTable",(function(){return z})),t.d(e,"RefreshButton",(function(){return L})),t.d(e,"RefreshIcone",(function(){return R})),t.d(e,"default",(function(){return M}));var r=t(36),o=t(3),i=t(2),c=t(10),a=t(16),d=t(5),s=t(1),l=t(11),u=t(12),b=t.n(u),h=t(15),f=t(37);function j(){return(j=Object(h.a)(b.a.mark((function n(e){var t,r,o,i,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.token,r=e.id,o=e.setCurrentUser,(i=new Headers).append("Accept","application/json"),i.append("Authorization","Bearer ".concat(t)),c={method:"DELETE",headers:i},n.prev=5,n.next=8,fetch("/api/orders/".concat(r),c);case 8:if(204!==n.sent.status){n.next=13;break}return n.next=12,Object(f.a)({setCurrentUser:o,token:t});case 12:return n.abrupt("return");case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),console.log(n.t0);case 18:case"end":return n.stop()}}),n,null,[[5,15]])})))).apply(this,arguments)}var p=function(n){return j.apply(this,arguments)};var x,O,g,m,v,y,w,k,S=t(66),P=t(72),C=t(80),A=t(0),T=i.b.main(x||(x=Object(o.a)(["\n    padding: 65px 0;\nmin-height:100vh;\nwidth:100%;\nmargin: 0 auto;\ntext-align:center;\nbackground:",";\n\n"])),(function(n){return n.theme.lightYellow})),D=i.b.thead(O||(O=Object(o.a)(["\nbackground-color: ",";\ncolor: ",';\n& > tr th {\n   padding: 10px 0;\n       font-family: "Oswald", sans-serif;\n       font-size:19px;\n}\n'])),(function(n){return n.theme.black}),(function(n){return n.theme.darckYellow})),z=i.b.table(g||(g=Object(o.a)(["\n    width: 100%;\nmax-width:900px;\nmargin: 20px auto 30px;\n    border-spacing: 10px;\n    border-collapse: collapse;\n    border: 2px solid ",";\n        box-shadow: ",";\n        text-transform: capitalize;\n&> tbody{\n  background:#fff;\n}\n& > tbody td small {\n       margin-right: 5px;\n}\n& >tbody td {\n  padding: 10px 0;\n  cursor:pointer;\n}\n& > tbody tr {\n      border-bottom: 1px solid;\n}\n@media screen and (max-width: 750px){\n   max-width: 400px;\n  & > ","{\n  display: none;\n    max-width: 400px;\n}\n& tbody tr {\ndisplay: flex;\n  flex-direction: column;\n}\n& >  tbody tr td {\n      display: flex;\n    padding: 5px 15px;\n    text-align: right;\n}\n& >  tbody tr td:first-child {\n  color:#fff;\n  padding: 10px 15px;\nbackground-color: ",';\n}\n& >  tbody tr td:first-child:before {\ncontent:"N\xba de Pedido";\n    color: ',';\n}\n& >  tbody tr td:nth-child(3):before {\ncontent:"Direcci\xf3n";\n}\n& >  tbody tr td:nth-child(2):before {\ncontent:"Fecha";\n}\n& >  tbody tr td:nth-child(5):before {\ncontent:"Estado";\n}\n& >  tbody tr td:nth-child(4):before {\ncontent:"Total";\n}\n& >  tbody tr td:nth-child(6):before {\ncontent:"Acciones";\n}\n& >tbody tr td:before{\n      margin-right: auto;\n    font-family: "Oswald", sans-serif;\n    font-size: 16px;\n    align-self: center;\npadding-rigth:5px;\n}\n}\n'])),(function(n){return n.theme.black}),(function(n){return n.theme.lihgtBoxShadow}),D,(function(n){return n.theme.black}),(function(n){return n.theme.darckYellow})),I=i.b.button(m||(m=Object(o.a)(['\npadding:  8px 5px;\ncursor:pointer;\noutline:none;\nmargin: 5px ;\n    border-radius: 10px 5px;\nborder: none;\nfont-family: "Oswald", sans-serif;\ntransition:all 0.5s ;\nopacity:',";\n&:hover {\nbackground:",";\n}\n"])),(function(n){return n.disabled?"0.4":"1"}),(function(n){return n.disabled?"unset":"#cdc8c8"})),B=i.b.div(v||(v=Object(o.a)(["\npadding: 30px 0;\n& >h3{\nmargin-bottom:40px;\n}\n@media screen and (max-width:450px){\n  font-size: 25px;\n}\n& > "," {\n      padding: 15px 30px;\n}\n"])),S.b),E=i.b.h2(y||(y=Object(o.a)(["\nfont-size:50px;\n"]))),L=i.b.div(w||(w=Object(o.a)([" \ncursor:pointer;\npadding:0 10px;\nalign-items: center;\n    border-radius: 5px;\n    height: 40px;\n      box-shadow: ",";\n    background:",";\n\n    margin: -40px 0 10px auto;\n    width: max-content;\ndisplay: flex;\n    transform: scale(0.7);\n    transition: all 0.3s ease;\n&:hover{\n  transform:scale(0.75);\n}\n"])),(function(n){return n.theme.lihgtBoxShadow}),(function(n){return n.theme.black})),R=i.b.img(k||(k=Object(o.a)(["\nheight: 50%;\ncursor:pointer;\n"])));function M(){var n=function(){var n=Object(l.a)(),e=n.currentUser,t=n.token,o=n.setCurrentUser,i=n.setIsLoading,c=Object(d.g)(),u=Object(s.useState)(1),b=Object(a.a)(u,2),h=b[0],j=b[1],x=Object(s.useState)(1),O=Object(a.a)(x,2),g=O[0],m=O[1],v=Object(s.useState)([]),y=Object(a.a)(v,2),w=y[0],k=y[1],S=Object(r.a)(null===e||void 0===e?void 0:e.orders).sort((function(n,e){return e.createdAt-n.createdAt}));return Object(s.useEffect)((function(){m(Math.ceil(S.length/5)),k(S.splice(5*(h-1),5*(h-1)+5))}),[h,5,e]),Object(s.useEffect)((function(){i(!1)}),[e]),{page:h,setPage:j,maxPage:g,orders:w,deleteOrder:function(n,e){if(n.stopPropagation(),!n.target.disabled)return p({token:t,id:e,setCurrentUser:o})},seeDetails:function(n){return c.push("/myAccount/myOrders/".concat(n))},handelRefresh:function(){i(!0),Object(f.a)({token:t,setCurrentUser:o})}}}(),e=n.page,t=n.setPage,o=n.maxPage,i=n.orders,u=n.deleteOrder,b=n.seeDetails,h=n.handelRefresh;return Object(A.jsxs)(T,{children:[Object(A.jsx)(P.SectionTitle,{light:!0,children:"Mis Pedidos"}),Object(A.jsx)(L,{onClick:h,children:Object(A.jsx)(R,{src:C.a,title:"Refrescar P\xe1gina"})}),(null===i||void 0===i?void 0:i.length)>0?Object(A.jsxs)(z,{children:[Object(A.jsx)(D,{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"N\xba de Pedido"}),Object(A.jsx)("th",{children:"Fecha"}),Object(A.jsx)("th",{children:"Direcci\xf3n"}),Object(A.jsx)("th",{children:"Total"}),Object(A.jsx)("th",{children:"Estado"}),Object(A.jsx)("th",{children:"Acciones"})]})}),Object(A.jsx)("tbody",{children:null===i||void 0===i?void 0:i.map((function(n){var e,t;return Object(A.jsxs)("tr",{onClick:function(e){return b(null===n||void 0===n?void 0:n.orderID)},children:[Object(A.jsx)("td",{children:null===n||void 0===n?void 0:n.orderID}),Object(A.jsxs)("td",{children:[Object(A.jsx)("small",{children:null===(e=new Date(null===n||void 0===n?void 0:n.states[0].date).toLocaleString())||void 0===e?void 0:e.split(" ")[0]}),Object(A.jsx)("br",{}),Object(A.jsx)("small",{children:null===(t=new Date(null===n||void 0===n?void 0:n.states[0].date).toLocaleString())||void 0===t?void 0:t.split(" ")[1]})]}),Object(A.jsx)("td",{children:n.client[0].address}),Object(A.jsxs)("td",{children:["$",null===n||void 0===n?void 0:n.total]}),Object(A.jsxs)("td",{children:[" ",Object(A.jsx)("b",{children:Object(r.a)(null===n||void 0===n?void 0:n.states).reverse().find((function(n){return!0===n.confirmed})).name})]}),Object(A.jsx)("td",{children:Object(A.jsx)(I,{disabled:!0===(null===n||void 0===n?void 0:n.states[1].confirmed),onClick:function(e){return u(e,n._id)},children:"Cancelar Pedido"})})]},null===n||void 0===n?void 0:n._id)}))})]}):Object(A.jsxs)(B,{children:[Object(A.jsx)(E,{children:"\ud83d\udc69\ud83c\udffb\u200d\ud83c\udf73"}),Object(A.jsx)("h3",{children:"Ning\xfan pedido realizado, tienes hambre?"}),Object(A.jsx)(S.b,{small:!0,as:c.b,to:"/menu",children:"Ver Men\xfa"})]}),Object(A.jsxs)(P.ButtonsWrapper,{children:[e>1?Object(A.jsxs)("button",{onClick:function(n){return t(e-1)},children:["<< ","Prev"]}):null,e<o?Object(A.jsxs)("button",{onClick:function(n){return t(e+1)},children:["Next"," >>"]}):null]})]})}},89:function(n,e,t){"use strict";t.r(e),t.d(e,"Page",(function(){return C})),t.d(e,"TableHead",(function(){return A})),t.d(e,"OrdersTable",(function(){return T})),t.d(e,"default",(function(){return D}));var r=t(36),o=t(3),i=t(2),c=t(12),a=t.n(c),d=t(15),s=t(16),l=t(5),u=t(1),b=t(11);var h,f,j,p=t(82),x=t(80),O=t(74),g=t(86),m=t(35),v=t(72),y=t(88),w=t(67),k=t(0);function S(n){var e=n.setStatePreferece,t=n.setPage;return Object(k.jsxs)(w.b,{name:"filterOrdersByState",onChange:function(n){return function(n){n.preventDefault(),t(1),e(n.target.value)}(n)},children:[Object(k.jsx)(w.a,{value:"all",children:"Todos"}),Object(k.jsx)(w.a,{value:"finish",children:"Liquidados"}),Object(k.jsx)(w.a,{value:"unfinish",children:"Pendientes"})]})}function P(n){var e=n.setSortPreferece;return Object(k.jsxs)(w.b,{name:"sortProductBy",onChange:function(n){return e(n.target.value)},children:[Object(k.jsx)(w.a,{value:"-createdAt",children:"M\xe1s recientes"}),Object(k.jsx)(w.a,{value:"createdAt",children:"M\xe1s antiguos"}),Object(k.jsx)(w.a,{value:"total",children:"Menor Monto"}),Object(k.jsx)(w.a,{value:"-total",children:"Mayor Monto"})]})}var C=i.b.section(h||(h=Object(o.a)(["\n    padding: 60px 0;\nmin-height:100vh;\nwidth:100%;\nmax-width: 1250px;\nmargin: 0 auto;\ntext-align:center;\n  &:before{\n    display: ",';\n      position:absolute;\n      content:" ";\n      top:0;\n      left:0;\n    right:0;\n    bottom:0;\n    background:#ffffff57;\n    z-index:400;\n    }\n       & >'," {\n  position: fixed;\n    top: 50%;\n    left: 50%;\n    z-index: 500;\n    margin: -60px 0  0 -60px ;\n \n}\n& > "," {\n  padding: 0 5px;\n}\n\n"])),(function(n){return n.isLoading?"block":"none"}),m.a,v.NotFaundMessage),A=i.b.thead(f||(f=Object(o.a)(['\nbackground-color: #171717;\ncolor: #fcba1c;\n& >tr th {\n   padding: 10px 0;\n       font-family: "Oswald", sans-serif;\n       font-size:19px;\n}\n']))),T=i.b.table(j||(j=Object(o.a)(["\n    width: 100%;\nmax-width:900px;\nmargin: 20px auto 40px;\n    border-spacing: 10px;\n    border-collapse: collapse;\n    border: 2px solid #171717;\n        text-transform: capitalize;\n\n&> tbody{\n  background:#fff;\n}\n\n& >tbody tr td {\n  padding: 10px 0;\n  cursor:pointer;\n\n}\n& >tbody tr {\n \n  border-bottom: 1px solid ;\n}\n& >tbody tr td small {\n  margin-left:   5px ;\n\n}\n@media screen and (max-width: 750px){\n\n    max-width: 400px;\n\n  & > ",'{\n  display: none;\n  max-width: 400px;\n}\n& tbody tr {\ndisplay: flex;\n  flex-direction: column;\n}\n& >  tbody tr td {\n      display: flex;\n    padding: 5px 15px;\n    text-align: right;\n}\n& >  tbody tr td:first-child {\n  color:#fff;\n  padding: 10px 15px;\nbackground-color: #171717;\n}\n& >  tbody tr td:first-child:before {\ncontent:"N\xba de Pedido";\n    color: #fcba1c;\n}\n& >  tbody tr td:nth-child(2):before {\ncontent:"Direcci\xf3n";\n}\n& >  tbody tr td:nth-child(3):before {\ncontent:"Fecha";\n}\n& >  tbody tr td:nth-child(5):before {\ncontent:"Estado";\n}\n& >  tbody tr td:nth-child(4):before {\ncontent:"Total";\n}\n& >tbody tr td:before{\n      margin-right: auto;\n    font-family: "Oswald", sans-serif;\n    font-size: 16px;\n    align-self: center;\n\n}\n\n\n}\n'])),A);function D(){var n=function(){var n=Object(l.g)(),e=Object(l.h)(),t=Object(b.a)(),r=t.token,o=t.setIsLoading,i=new URLSearchParams,c=Object(u.useState)(""),h=Object(s.a)(c,2),f=h[0],j=h[1],p=Object(u.useState)(!1),x=Object(s.a)(p,2),O=x[0],g=x[1],m=Object(u.useState)(1),v=Object(s.a)(m,2),y=v[0],w=v[1],k=Object(u.useState)(1),S=Object(s.a)(k,2),P=S[0],C=S[1],A=Object(u.useState)([]),T=Object(s.a)(A,2),D=T[0],z=T[1],I=Object(u.useState)("all"),B=Object(s.a)(I,2),E=B[0],L=B[1],R=Object(u.useState)("-createdAt"),M=Object(s.a)(R,2),N=M[0],F=M[1],U=Object(u.useState)(!0),Y=Object(s.a)(U,2),_=Y[0],H=Y[1],q=Object(u.useState)(!1),J=Object(s.a)(q,2),W=J[0],$=J[1];return i.append("page",y),i.append("limit",5),i.append("sort",N),Object(u.useEffect)((function(){var t=new AbortController,o=t.signal;return function(){var t=Object(d.a)(a.a.mark((function t(){var c,d,s,l,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(!0),t.prev=1,_&&""!==e.search&&(i=e.search.split("?")[1],H(!1)),""!==f&&(i.append("orderID",f),w(1),L("all")),"all"!==E&&i.append("state",E),(c=new Headers).append("Accept","application/json"),c.append("Authorization","Bearer ".concat(r)),d={method:"GET",headers:c,signal:o},t.next=11,fetch("/api/orders?".concat(i),d);case 11:return s=t.sent,t.next=14,s.json();case 14:l=t.sent,z(l.data),u=parseInt(l.total),C(Math.ceil(u/5)),n.push("/dashboard/orders?".concat(i)),document.querySelector("body").scrollTo(0,100),g(!1),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(1),"AbortError"===t.t0.name?console.log("Fetch Canseled: caught abort"):console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[1,23]])})));return function(){return t.apply(this,arguments)}}()(),function(){t.abort()}}),[f,E,y,N,W]),{seeDetails:function(e){o(!0),n.push("/dashboard/orders/".concat(e))},handleRefresh:function(){$(!W)},setOrderID:j,setSorting:F,setState:L,setPage:w,page:y,isLoading:O,maxPage:P,orders:D,sorting:N,isFirstRender:_}}(),e=n.seeDetails,t=n.handleRefresh,o=n.setOrderID,i=n.setSorting,c=n.setPage,h=n.setState,f=n.page,j=n.isLoading,w=n.maxPage,D=n.orders,z=n.sorting,I=n.isFirstRender;return Object(k.jsxs)(C,{isLoading:j,children:[Object(k.jsx)(p.a,{}),Object(k.jsx)(v.SectionTitle,{children:"Pedidos"}),Object(k.jsx)(g.RefreshButton,{onClick:function(n){return t()},children:Object(k.jsx)(g.RefreshIcone,{src:x.a,title:"Refrescar P\xe1gina"})}),Object(k.jsx)(O.a,{placeholder:"N\xfamero de orden...",setSearch:o}),Object(k.jsxs)(y.FiltersBoard,{children:[Object(k.jsx)(S,{setPage:c,setStatePreferece:h}),Object(k.jsx)(P,{setSortPreferece:i,sortPreference:z})]}),j?Object(k.jsx)(m.a,{}):null,j||I||0!==(null===D||void 0===D?void 0:D.length)?Object(k.jsxs)(T,{children:[Object(k.jsx)(A,{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"N\xba de Pedido"}),Object(k.jsx)("th",{children:"Fecha"}),Object(k.jsx)("th",{children:"Direcci\xf3n"}),Object(k.jsx)("th",{children:"Total"}),Object(k.jsx)("th",{children:"Estado"})]})}),Object(k.jsx)("tbody",{children:null===D||void 0===D?void 0:D.map((function(n){return Object(k.jsxs)("tr",{onClick:function(t){return e(null===n||void 0===n?void 0:n._id)},children:[Object(k.jsx)("td",{children:null===n||void 0===n?void 0:n.orderID}),Object(k.jsxs)("td",{children:[Object(k.jsx)("small",{children:new Date(n.states[0].date).toLocaleString().split(" ")[0]}),Object(k.jsx)("br",{}),Object(k.jsx)("small",{children:new Date(n.states[0].date).toLocaleString().split(" ")[1]})]}),Object(k.jsx)("td",{children:null===n||void 0===n?void 0:n.client[0].address}),Object(k.jsxs)("td",{children:["$",null===n||void 0===n?void 0:n.total]}),Object(k.jsxs)("td",{children:[" ",Object(k.jsx)("b",{children:Object(r.a)(null===n||void 0===n?void 0:n.states).reverse().find((function(n){return!0===n.confirmed})).name})]})]},null===n||void 0===n?void 0:n.orderID)}))})]}):Object(k.jsx)(v.NotFaundMessage,{children:"No se han encontrado coincidencias, intenta de nuevo!!"}),Object(k.jsxs)(v.ButtonsWrapper,{children:[f>1?Object(k.jsxs)("button",{onClick:function(n){return c(f-1)},children:["<< ","Prev"]}):null,f<w?Object(k.jsxs)("button",{onClick:function(n){return c(f+1)},children:["Next"," >>"]}):null]})]})}}}]);
//# sourceMappingURL=12.71aec267.chunk.js.map