{"version":3,"sources":["hooks/useNewestProducts.js","components/home/NewestProducts.js"],"names":["useNewestProducts","useState","isLoading","setIsloading","latestProducts","setLatestProducts","ref","useRef","useEffect","controller","AbortController","signal","fetchLatestProducts","a","fetch","res","json","data","name","console","log","counter","current","abort","StyledNewestProducts","styled","section","ProductsWrapper","ProductsSection","NewestProducts","ProductsSectionSkeletom","map","product","item","AddToCartButton","thisProductInfo","_id"],"mappings":"sLAgDeA,I,IAAAA,EA7Cf,WAA6B,IAAD,EACOC,oBAAS,GADhB,mBACnBC,EADmB,KACTC,EADS,OAEeF,mBAAS,IAFxB,mBAEpBG,EAFoB,KAELC,EAFK,KAItBC,EAAMC,iBAAO,GAuCjB,OArCAC,qBAAU,WACZ,IAAIC,EAAa,IAAIC,gBACdC,EAASF,EAAWE,OACjBC,EAAmB,uCAAG,gCAAAC,EAAA,6DAC1BV,GAAa,GADa,kBAGfW,MAAM,0DAA0D,CAACH,WAHlD,cAG3BI,EAH2B,gBAIfA,EAAIC,OAJW,OAI5BA,EAJ4B,OAMhCX,EAAkB,YAAIW,EAAKC,OAC3Bd,GAAa,GAPmB,kDASf,eAAb,KAAIe,KACLC,QAAQC,IAAI,iCAGXC,EAAUf,EAAIgB,QACfH,QAAQC,IAAR,MAEKC,EAAU,IACTT,IACTN,EAAIgB,SAAW,IAlBiB,0DAAH,qDA4B1B,OAFAV,IAEO,WACLH,EAAWc,WAEZ,IAGK,CAACrB,YAAUE,mB,+CCrCdoB,EAAsBC,IAAOC,QAAT,iFAKpBC,EAAgBF,YAAOG,IAAPH,CAAD,qFAyCNI,UAnCd,WAA0B,IAAD,EAGS7B,IAA5BE,EAHmB,EAGnBA,UAAUE,EAHS,EAGTA,eAEf,OAIC,eAACoB,EAAD,WACD,cAAC,eAAD,mCAGDtB,EAAa,cAAC4B,EAAA,EAAD,IAEZ,cAACH,EAAD,UACGvB,EAAe2B,KAAK,SAAAC,GAExB,OAAO,cAAC,IAAD,CAAwBC,KAAMD,EAA9B,SACU,cAACE,EAAA,EAAD,CAAiBC,gBAAiBH,KADjCA,EAAQI","file":"static/js/20.7ed9f431.chunk.js","sourcesContent":["import {   useEffect,useState,useRef } from 'react'\r\n\r\n\r\nfunction useNewestProducts(){\r\n  const [isLoading,setIsloading] = useState(false);\r\n const [latestProducts,setLatestProducts] =useState([])\r\n\r\nconst ref = useRef(0)\r\n\r\n  useEffect(()=>{\r\nlet controller = new AbortController()\r\n const signal = controller.signal\r\n    const fetchLatestProducts = async () =>{\r\n      setIsloading(true)\r\n      try{\r\n let res = await fetch('api/products?active=true&sort=-createdAt&page=1&limit=6',{signal,})\r\nlet json = await res.json()\r\n\r\nsetLatestProducts([...json.data])\r\nsetIsloading(false)\r\n      }catch(err){\r\n if(err.name === 'AbortError'){\r\n   console.log('Fetch Canseled: caught abort')\r\n }else{\r\n\r\nlet counter = ref.current\r\n   console.log(err)\r\n\r\n     if(counter < 6 ){\r\n         fetchLatestProducts()\r\nref.current += 1\r\n\r\n   }\r\n       \r\n\r\n      }\r\n       }\r\n    }\r\n   fetchLatestProducts()\r\n\r\n   return () =>{\r\n     controller.abort()\r\n   }   \r\n  },[])\r\n\r\n\r\n  return {isLoading,latestProducts}\r\n}\r\nexport default useNewestProducts","import styled  from 'styled-components'\r\nimport useNewestProducts from '../../hooks/useNewestProducts'\r\nimport Item  from '../menu/MenuItem'\r\nimport {SectionTitle} from '../menu/Menu'\r\nimport {ProductsSection} from '../menu/ProductsSection'\r\nimport AddToCartButton from '../AddToCartButton'\r\nimport ProductsSectionSkeletom from '../ProductsSectionSkeletom'\r\n\r\n\r\nconst StyledNewestProducts= styled.section`\r\nwidth:100vw;\r\ntext-aling:center;\r\nmin-height:400px;\r\n`\r\nconst ProductsWrapper=styled(ProductsSection) `\r\nheight:100%;\r\nalign-items:center;\r\nmargin-bottom: 30px;\r\n`;\r\n\r\n function NewestProducts(){\r\n\r\n\r\nconst {isLoading,latestProducts} = useNewestProducts()\r\n\r\n  return(\r\n\r\n\r\n   \r\n   <StyledNewestProducts>\r\n  <SectionTitle>Ãšltimas Novedades</SectionTitle>\r\n\r\n{    \r\n(isLoading )? <ProductsSectionSkeletom/>\r\n  :\r\n  <ProductsWrapper>\r\n    {latestProducts.map( product => {\r\n \r\n return <Item key={product._id} item={product}>\r\n                  <AddToCartButton thisProductInfo={product}/>\r\n   \r\n </Item>\r\n    }\r\n    \r\n      )}\r\n \r\n  </ProductsWrapper>\r\n}\r\n</StyledNewestProducts>\r\n\r\n\r\n\r\n  );\r\n}\r\n\r\nexport default NewestProducts"],"sourceRoot":""}