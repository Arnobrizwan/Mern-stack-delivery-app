(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[15],{131:function(n,e,t){"use strict";t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return d}));var r,a,o=t(3),c=t(2),i=c.b.a(r||(r=Object(o.a)(["\n     box-shadow: ",";\npadding: 15px 40px;\ncolor:#fff;\nwidth:max-content;\n  background:",';\n  text-transform: uppercase;\n  text-align:center;\n  font-size: 16px;\n  font-family: "Oswald", sans-serif;\n  font-weight:600px;\n line-height:23.5px;\n  cursor:pointer;\n  letter-spacing:2px;\n  border-radius:4px;\n    text-decoration: none;\n\n    transform:\'',"';\n  transition:all 0.5s ease;\n  &:hover{\n    background-color:",";\n  }\n  & > * {\n    cursor:pointer;\n  }\n    @media screen and (max-width: 550px){\n   transform:scale(0.8);\n"])),(function(n){return n.theme.lightBoxShadow}),(function(n){return n.theme.darckYellow}),(function(n){return n.small?"scale(0.7)":"scale(1)"}),(function(n){return n.theme.black})),d=Object(c.b)(i)(a||(a=Object(o.a)(["\n  background:",";\n"])),(function(n){return n.theme.orange}))},147:function(n,e,t){"use strict";t.d(e,"a",(function(){return u}));var r,a,o,c=t(3),i=t(2),d=t(0),s=i.b.div(r||(r=Object(c.a)(["\nwidth:100%;\nmax-width:900px;\nmargin:20px auto 0;\nbackground:gray;\nbox-shadow: 1px 1px 5px #00000057;\nbackground:#f3f3f3;\n@media screen and (max-width: 750px){\n   max-width: 400px;\n}\n"]))),l=i.b.div(a||(a=Object(c.a)(["\nwidth:100%;\nheight:60px;\nbackground:#ccc;\nbox-shadow: 1px 1px 5px #00000057;\nborder-bottom:1px solid #ccc;\n"]))),b=i.b.div(o||(o=Object(c.a)(["\nwith:100%;\nheight:50px;\nbackground:white;\nmargin: 1px 0;\nbackground:#fff;\nborder-bottom:1px solid #ccc;\nbox-shadow: 0 1px 3px #ccc;\n\n@media screen and (max-width: 750px){\nheight:100px;\n}\n"])));function u(){return Object(d.jsxs)(s,{children:[Object(d.jsx)(l,{}),Object(d.jsx)(b,{}),Object(d.jsx)(b,{}),Object(d.jsx)(b,{}),Object(d.jsx)(b,{}),Object(d.jsx)(b,{})]})}},148:function(n,e,t){"use strict";e.a=t.p+"static/media/refresh.f1c42ba5.svg"},154:function(n,e,t){"use strict";t.r(e),t.d(e,"TableHead",(function(){return T})),t.d(e,"OrdersTable",(function(){return E})),t.d(e,"RefreshButton",(function(){return F})),t.d(e,"RefreshIcone",(function(){return I})),t.d(e,"default",(function(){return M}));var r=t(56),a=t(3),o=t(2),c=t(1),i=t(11),d=t(5),s=t(6),l=t.n(s),b=t(10),u=t(7),h=t(9);function p(){return(p=Object(b.a)(l.a.mark((function n(e){var t,r,a,o,c,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.token,r=e.id,(a=new Headers).append("Accept","application/json"),a.append("Authorization","Bearer ".concat(t)),o={method:"DELETE",headers:a},n.prev=5,n.next=8,fetch("/api/orders/".concat(r),o);case 8:return c=n.sent,n.next=11,c.json();case 11:i=n.sent,204!==c&&console.log(i.message),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),console.log(n.t0);case 18:case"end":return n.stop()}}),n,null,[[5,15]])})))).apply(this,arguments)}var x=function(n){return p.apply(this,arguments)};var f,j,g,O,m,v,w,y,k=t(131),S=t(137),P=t(135),D=t(147),A=t(148),L=t(32),z=t(0),R=o.b.main(f||(f=Object(a.a)(["\n    padding: 65px 5px;\nmin-height:100vh;\nwidth:100%;\nmargin: 0 auto;\ntext-align:center;\nbackground:",";\n  &:before{\n    display: ",';\n      position:absolute;\n      content:" ";\n      top:0;\n      left:0;\n    right:0;\n    bottom:0;\n    background:#ffffff57;\n    z-index:400;\n    }\n       & >'," {\n  position: fixed;\n    top: 50%;\n    left: 50%;\n    z-index: 500;\n    margin: -60px 0  0 -60px ;\n\n}\n"])),(function(n){return n.theme.lightYellow}),(function(n){return n.isLoading?"block":"none"}),L.a),T=o.b.thead(j||(j=Object(a.a)(["\nbackground-color: ",";\ncolor: ",';\n& > tr th {\n   padding: 10px 0;\n       font-family: "Oswald", sans-serif;\n       font-size:19px;\n}\n'])),(function(n){return n.theme.black}),(function(n){return n.theme.darckYellow})),E=o.b.table(g||(g=Object(a.a)(["\n    width: 100%;\nmax-width:900px;\nmargin: 20px auto 30px;\n    border-spacing: 10px;\n    border-collapse: collapse;\n    border: 2px solid ",";\n        box-shadow: ",";\n        text-transform: capitalize;\n&> tbody{\n  background:#fff;\n}\n& > tbody td span + span{\n       margin-right: 5px;\n}\n& >tbody td {\n  padding: 10px 0;\n  cursor:pointer;\n}\n& > tbody tr {\n     border-bottom: 1px solid;\n}\n@media screen and (max-width: 750px){\n   max-width: 400px;\n  & > ","{\n  display: none;\n    max-width: 400px;\n}\n& tbody tr {\ndisplay: flex;\n  flex-direction: column;\n          border-bottom: 1px solid rgb(0 0 0 / 45%);\n}\n& >  tbody tr td {\n      display: flex;\n    padding: 5px 15px;\n    text-align: right;\n}\n& >  tbody tr td:first-child {\n  color:#fff;\n  padding: 10px 15px;\nbackground-color: ",';\n}\n& >  tbody tr td:first-child:before {\ncontent:"N\xba de Pedido";\n    color: ',';\n}\n& >  tbody tr td:nth-child(3):before {\ncontent:"Direcci\xf3n";\n}\n& >  tbody tr td:nth-child(2):before {\ncontent:"Fecha";\n}\n& >  tbody tr td:nth-child(5):before {\ncontent:"Estado";\n}\n& >  tbody tr td:nth-child(4):before {\ncontent:"Total";\n}\n& >  tbody tr td:nth-child(6):before {\ncontent:"Acciones";\n}\n& >tbody tr td:before{\n      margin-right: auto;\n    font-family: "Oswald", sans-serif;\n    font-size: 16px;\n    align-self: center;\npadding-rigth:5px;\n}\n}\n'])),(function(n){return n.theme.black}),(function(n){return n.theme.lihgtBoxShadow}),T,(function(n){return n.theme.black}),(function(n){return n.theme.darckYellow})),C=o.b.button(O||(O=Object(a.a)(['\npadding:  8px 5px;\ncursor:pointer;\noutline:none;\nmargin: 5px ;\n    border-radius: 10px 5px;\nborder: none;\nfont-family: "Oswald", sans-serif;\ntransition:all 0.5s ;\nopacity:',";\n&:hover {\nbackground:",";\n}\n"])),(function(n){return n.disabled?"0.4":"1"}),(function(n){return n.disabled?"unset":"#cdc8c8"})),N=o.b.div(m||(m=Object(a.a)(["\npadding: 30px 0;\n& >h3{\nmargin-bottom:40px;\n}\n@media screen and (max-width:450px){\n  font-size: 25px;\n}\n& > "," {\n      padding: 15px 30px;\n}\n"])),k.b),B=o.b.h2(v||(v=Object(a.a)(["\nfont-size:50px;\n"]))),F=o.b.div(w||(w=Object(a.a)(["\ncursor:pointer;\npadding:0 10px;\nalign-items: center;\n    border-radius: 5px;\n    height: 40px;\n      box-shadow: ",";\n    background:",";\n\n    margin: -46px 0 10px auto;\n    width: max-content;\ndisplay: flex;\n    transform: scale(0.7);\n    transition: all 0.3s ease;\n&:hover{\n  transform:scale(0.75);\n}\n"])),(function(n){return n.theme.lihgtBoxShadow}),(function(n){return n.theme.black})),I=o.b.img(y||(y=Object(a.a)(["\nheight: 50%;\ncursor:pointer;\n"])));function M(n){var e=function(n){var e=n.setNotification,t=Object(u.g)(),r=Object(h.a)(),a=r.token,o=r.setIsLoading,i=r.currentUser,s=function(){var n=Object(b.a)(l.a.mark((function n(e,t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.stopPropagation(),e.target.disabled){n.next=6;break}return O(!0),n.next=5,x({token:a,id:t});case 5:H();case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),p=new URLSearchParams,f=Object(c.useState)(!1),j=Object(d.a)(f,2),g=j[0],O=j[1],m=Object(c.useState)(1),v=Object(d.a)(m,2),w=v[0],y=v[1],k=Object(c.useState)(1),S=Object(d.a)(k,2),P=S[0],D=S[1],A=Object(c.useState)([]),L=Object(d.a)(A,2),z=L[0],R=L[1],T=Object(c.useState)(!0),E=Object(d.a)(T,2),C=E[0],N=E[1],B=Object(c.useState)(0),F=Object(d.a)(B,2),I=F[0],M=F[1];p.append("page",w),p.append("limit",5),p.append("sort","-createdAt"),Object(c.useEffect)((function(){e(0);var n=new AbortController,t=n.signal;return function(){var n=Object(b.a)(l.a.mark((function n(){var e,r,o,c,d;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return O(!0),n.prev=1,(e=new Headers).append("Accept","application/json"),e.append("Authorization","Bearer ".concat(a)),r={method:"GET",headers:e,signal:t},n.next=8,fetch("/api/orders/user/".concat(i._id,"?").concat(p),r);case 8:return o=n.sent,n.next=11,o.json();case 11:c=n.sent,R(c.data),d=parseInt(c.total),D(Math.ceil(d/5)),document.querySelector("body").scrollTo(0,60),N(!1),O(!1),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(1),"AbortError"===n.t0.name?console.log("Fetch Canseled: caught abort"):console.log(n.t0);case 23:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(){return n.apply(this,arguments)}}()(),function(){n.abort()}}),[w,I]);var H=function(){M(Date.now()),y(1)};return{seeDetails:function(n){o(!0),t.push("/myAccount/myOrders/".concat(n))},handleRefresh:H,setPage:y,page:w,isLoading:g,maxPage:P,orders:z,isFirstRender:C,deleteOrder:s}}({setNotification:n.setNotification}),t=e.seeDetails,a=e.handleRefresh,o=e.setPage,s=e.page,p=e.isLoading,f=e.maxPage,j=e.orders,g=e.isFirstRender,O=e.deleteOrder;return Object(z.jsxs)(R,{isLoading:p,children:[p?Object(z.jsx)(L.a,{}):null,Object(z.jsx)(S.SectionTitle,{light:!0,children:"Mis Pedidos"}),Object(z.jsx)(F,{onClick:function(){return a()},children:Object(z.jsx)(I,{onClick:function(){return a()},src:A.a,title:"Refrescar P\xe1gina"})}),p&&g&&Object(z.jsx)(D.a,{}),!p&&!g&&0===(null===j||void 0===j?void 0:j.length)&&Object(z.jsxs)(N,{children:[Object(z.jsx)(B,{children:"\ud83d\udc69\ud83c\udffb\u200d\ud83c\udf73"}),Object(z.jsx)("h3",{children:"Ning\xfan pedido realizado, tienes hambre?"}),Object(z.jsx)(k.b,{small:!0,as:i.b,to:"/menu",children:"Ver Men\xfa"})]}),0!==(null===j||void 0===j?void 0:j.length)&&Object(z.jsxs)(E,{children:[Object(z.jsx)(T,{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"N\xba de Pedido"}),Object(z.jsx)("th",{children:"Fecha"}),Object(z.jsx)("th",{children:"Direcci\xf3n"}),Object(z.jsx)("th",{children:"Total"}),Object(z.jsx)("th",{children:"Estado"}),Object(z.jsx)("th",{children:"Acciones"})]})}),Object(z.jsx)("tbody",{children:null===j||void 0===j?void 0:j.map((function(n){var e,a;return Object(z.jsxs)("tr",{onClick:function(e){return t(n._id)},children:[Object(z.jsx)("td",{children:null===n||void 0===n?void 0:n.orderID}),Object(z.jsxs)("td",{children:[Object(z.jsx)("span",{children:null===(e=new Date(null===n||void 0===n?void 0:n.states[0].date).toLocaleString())||void 0===e?void 0:e.split(" ")[0]}),Object(z.jsx)("br",{}),Object(z.jsx)("span",{children:null===(a=new Date(null===n||void 0===n?void 0:n.states[0].date).toLocaleString())||void 0===a?void 0:a.split(" ")[1]})]}),Object(z.jsx)("td",{children:n.client[0].address}),Object(z.jsxs)("td",{children:["$",null===n||void 0===n?void 0:n.total]}),Object(z.jsxs)("td",{children:[" ",Object(z.jsx)("b",{children:Object(r.a)(null===n||void 0===n?void 0:n.states).reverse().find((function(n){return!0===n.confirmed})).name})]}),Object(z.jsx)("td",{children:Object(z.jsx)(C,{disabled:!0===(null===n||void 0===n?void 0:n.states[1].confirmed),onClick:function(e){return O(e,n._id)},children:"Cancelar Pedido"})})]},null===n||void 0===n?void 0:n._id)}))})]}),Object(z.jsx)(P.a,{setPage:o,page:s,maxPage:f})]})}},160:function(n,e,t){"use strict";t.r(e),t.d(e,"Page",(function(){return z})),t.d(e,"TableHead",(function(){return R})),t.d(e,"OrdersTable",(function(){return T})),t.d(e,"default",(function(){return E}));var r=t(56),a=t(3),o=t(2),c=t(6),i=t.n(c),d=t(10),s=t(5),l=t(7),b=t(1),u=t(9);var h=t(150),p=t(148),x=t(140),f=t(154),j=t(32),g=t(139),O=t(137),m=t(159),v=t(132),w=t(0);function y(n){var e=n.setStatePreferece,t=n.setPage;return Object(w.jsxs)(v.b,{name:"filterOrdersByState",onChange:function(n){return function(n){n.preventDefault(),t(1),e(n.target.value)}(n)},children:[Object(w.jsx)(v.a,{value:"all",children:"Todos"}),Object(w.jsx)(v.a,{value:"finish",children:"Liquidados"}),Object(w.jsx)(v.a,{value:"unfinish",children:"Pendientes"})]})}function k(n){var e=n.setSortPreferece;return Object(w.jsxs)(v.b,{name:"sortProductBy",onChange:function(n){return e(n.target.value)},children:[Object(w.jsx)(v.a,{value:"-createdAt",children:"M\xe1s recientes"}),Object(w.jsx)(v.a,{value:"createdAt",children:"M\xe1s antiguos"}),Object(w.jsx)(v.a,{value:"total",children:"Menor Monto"}),Object(w.jsx)(v.a,{value:"-total",children:"Mayor Monto"})]})}var S,P,D,A=t(135),L=t(147),z=o.b.section(S||(S=Object(a.a)(["\n    padding: 60px 05px;\nmin-height:100vh;\nwidth:100%;\nmax-width: 1250px;\nmargin: 0 auto;\ntext-align:center;\n  &:before{\n    display: ",';\n      position:absolute;\n      content:" ";\n      top:0;\n      left:0;\n    right:0;\n    bottom:0;\n    background:#ffffff57;\n    z-index:400;\n    }\n       & >'," {\n  position: fixed;\n    top: 50%;\n    left: 50%;\n    z-index: 500;\n    margin: -60px 0  0 -60px ;\n\n}\n& > "," {\n  padding: 0 5px;\n}\n& > "," {\n margin: 30px 5px 0;\n}\n\n"])),(function(n){return n.isLoading?"block":"none"}),j.a,g.a,m.FiltersBoard),R=o.b.thead(P||(P=Object(a.a)(['\nbackground-color: #171717;\ncolor: #fcba1c;\n& >tr th {\n   padding: 10px 0;\n       font-family: "Oswald", sans-serif;\n       font-size:19px;\n}\n']))),T=o.b.table(D||(D=Object(a.a)(["\n    width: 100%;\nmax-width:900px;\nmargin: 20px auto 40px;\n    border-spacing: 10px;\n    border-collapse: collapse;\n    border: 2px solid #171717;\n        text-transform: capitalize;\n\n&> tbody{\n  background:#fff;\n}\n\n& >tbody tr td {\n  padding: 10px 0;\n  cursor:pointer;\n\n}\n& >tbody tr {\n\n  border-bottom: 1px solid ;\n}\n& >tbody tr td small {\n  margin-left:   5px ;\n\n}\n@media screen and (max-width: 750px){\n\n    max-width: 400px;\n\n  & > ",'{\n  display: none;\n  max-width: 400px;\n}\n& tbody tr {\ndisplay: flex;\n  flex-direction: column;\n}\n& >  tbody tr td {\n      display: flex;\n    padding: 5px 15px;\n    text-align: right;\n}\n& >  tbody tr td:first-child {\n  color:#fff;\n  padding: 10px 15px;\nbackground-color: #171717;\n}\n& >  tbody tr td:first-child:before {\ncontent:"N\xba de Pedido";\n    color: ',';\n}\n& >  tbody tr td:nth-child(2):before {\ncontent:"Fecha";\n}\n& >  tbody tr td:nth-child(3):before {\ncontent:"Direcci\xf3n";\n}\n& >  tbody tr td:nth-child(5):before {\ncontent:"Estado";\n}\n& >  tbody tr td:nth-child(4):before {\ncontent:"Total";\n}\n& >tbody tr td:before{\n      margin-right: auto;\n    font-family: "Oswald", sans-serif;\n    font-size: 16px;\n    align-self: center;\n\n}\n\n\n}\n'])),R,(function(n){return n.theme.darckYellow}));function E(n){var e=function(n){var e=n.setNotification,t=Object(l.g)(),r=Object(l.h)(),a=Object(u.a)(),o=a.token,c=a.setIsLoading,h=new URLSearchParams,p=Object(b.useState)(""),x=Object(s.a)(p,2),f=x[0],j=x[1],g=Object(b.useState)(!1),O=Object(s.a)(g,2),m=O[0],v=O[1],w=Object(b.useState)(1),y=Object(s.a)(w,2),k=y[0],S=y[1],P=Object(b.useState)(1),D=Object(s.a)(P,2),A=D[0],L=D[1],z=Object(b.useState)([]),R=Object(s.a)(z,2),T=R[0],E=R[1],C=Object(b.useState)("all"),N=Object(s.a)(C,2),B=N[0],F=N[1],I=Object(b.useState)("-createdAt"),M=Object(s.a)(I,2),H=M[0],Y=M[1],_=Object(b.useState)(!0),q=Object(s.a)(_,2),U=q[0],G=q[1],J=Object(b.useState)(0),$=Object(s.a)(J,2),V=$[0],K=$[1];return h.append("page",k),h.append("limit",5),h.append("sort",H),Object(b.useEffect)((function(){""!==f&&(h.append("orderID",f),S(1),F("all"))}),[f]),Object(b.useEffect)((function(){"all"!==B&&h.append("state",B)}),[B]),Object(b.useEffect)((function(){e(0);var n=new AbortController,a=n.signal;return U&&""!==r.search&&(h=r.search.split("?")[1]),function(){var n=Object(d.a)(i.a.mark((function n(){var e,r,c,d,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.prev=1,(e=new Headers).append("Accept","application/json"),e.append("Authorization","Bearer ".concat(o)),r={method:"GET",headers:e,signal:a},n.next=8,fetch("/api/orders?".concat(h),r);case 8:return c=n.sent,n.next=11,c.json();case 11:d=n.sent,E(d.data),s=parseInt(d.total),L(Math.ceil(s/5)),t.push("/dashboard/orders?".concat(h)),document.querySelector("body").scrollTo(0,60),G(!1),v(!1),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(1),"AbortError"===n.t0.name?console.log("Fetch Canseled: caught abort"):console.log(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(){return n.apply(this,arguments)}}()(),function(){n.abort()}}),[f,B,k,H,V]),{seeDetails:function(n){c(!0),t.push("/dashboard/orders/".concat(n))},handleRefresh:function(){K(Date.now()),S(1),Y("-createdAt"),F("all")},setOrderID:j,setSorting:Y,setState:F,setPage:S,page:k,isLoading:m,maxPage:A,orders:T,sorting:H,isFirstRender:U}}({setNotification:n.setNotification}),t=e.seeDetails,a=e.handleRefresh,o=e.setOrderID,c=e.setSorting,v=e.setPage,S=e.setState,P=e.page,D=e.isLoading,E=e.maxPage,C=e.orders,N=e.sorting,B=e.isFirstRender;return Object(w.jsxs)(z,{isLoading:D,children:[Object(w.jsx)(h.a,{}),Object(w.jsx)(O.SectionTitle,{children:"Pedidos"}),Object(w.jsx)(x.a,{placeholder:"N\xfamero de orden...",setSearch:o}),Object(w.jsxs)(m.FiltersBoard,{children:[Object(w.jsx)(y,{setPage:v,setStatePreferece:S}),Object(w.jsx)(k,{setSortPreferece:c,sortPreference:N})]}),Object(w.jsx)(f.RefreshButton,{"data-testid":"refresh-button",onClick:function(){return a()},children:Object(w.jsx)(f.RefreshIcone,{src:p.a,title:"Refrescar P\xe1gina"})}),D?Object(w.jsx)(j.a,{}):null,D&&B&&Object(w.jsx)(L.a,{}),!D&&!B&&0===(null===C||void 0===C?void 0:C.length)&&Object(w.jsx)(g.a,{children:"No se han encontrado coincidencias, intenta de nuevo!!"}),0!==(null===C||void 0===C?void 0:C.length)&&Object(w.jsxs)(T,{children:[Object(w.jsx)(R,{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"N\xba de Pedido"}),Object(w.jsx)("th",{children:"Fecha"}),Object(w.jsx)("th",{children:"Direcci\xf3n"}),Object(w.jsx)("th",{children:"Total"}),Object(w.jsx)("th",{children:"Estado"})]})}),Object(w.jsx)("tbody",{children:null===C||void 0===C?void 0:C.map((function(n){return Object(w.jsxs)("tr",{onClick:function(e){return t(null===n||void 0===n?void 0:n._id)},children:[Object(w.jsx)("td",{children:null===n||void 0===n?void 0:n.orderID}),Object(w.jsxs)("td",{children:[Object(w.jsx)("span",{children:new Date(n.states[0].date).toLocaleString().split(" ")[0]}),Object(w.jsx)("br",{}),Object(w.jsx)("span",{children:new Date(n.states[0].date).toLocaleString().split(" ")[1]})]}),Object(w.jsx)("td",{children:null===n||void 0===n?void 0:n.client[0].address}),Object(w.jsxs)("td",{children:["$",null===n||void 0===n?void 0:n.total]}),Object(w.jsxs)("td",{children:[" ",Object(w.jsx)("b",{children:Object(r.a)(null===n||void 0===n?void 0:n.states).reverse().find((function(n){return!0===n.confirmed})).name})]})]},null===n||void 0===n?void 0:n.orderID)}))})]}),Object(w.jsx)(A.a,{setPage:v,page:P,maxPage:E})]})}}}]);
//# sourceMappingURL=15.990b9826.chunk.js.map